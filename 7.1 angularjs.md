# AngularJs

angularjs æ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„å‰ç«¯æ¡†æ¶

- æ¡†æ¶å’Œåº“
  - æ— è®ºæ˜¯ angularjs è¿˜æ˜¯ jQuery éƒ½æ˜¯åŸç”Ÿ js å°è£…çš„
  - æ¡†æ¶: **æä¾›ä»£ç çš„ä¹¦å†™è§„åˆ™** æŒ‰ç…§è§„åˆ™ä¹¦å†™ä»£ç  æ¡†æ¶ä¼šå¸®æˆ‘ä»¬å®ç°å“åº”çš„åŠŸèƒ½
  - åº“: å¯¹ä»£ç è¿›è¡Œå°è£… è°ƒç”¨å°è£…çš„æ–¹æ³• **ç®€åŒ–æ“ä½œ**
- angularjs çš„æ ¸å¿ƒæ€æƒ³
  - é€šè¿‡æŒ‡ä»¤æ‰©å±• HTML åŠŸèƒ½, é€šè¿‡å·®å€¼è¡¨è¾¾å¼ç»‘å®šæ•°æ®åˆ° HTML
  - ä¸æ¨èåœ¨æ§åˆ¶å™¨ä¸­ç›´æ¥æ“ä½œ dom, è€Œæ˜¯é€šè¿‡æŒ‡ä»¤æ“ä½œ
  - ä»¥æ•°æ®ä¸ºä¸­å¿ƒ, ç”¨æ•°æ®æ“ä½œ dom
- angularjs çš„ç‰¹æ€§
  - åŒå‘æ•°æ®ç»‘å®š
  - æ¨¡æ¿
  - MVC
  - æœåŠ¡å’Œä¾èµ–æ³¨å…¥
  - æŒ‡ä»¤

## æ’å€¼è¡¨è¾¾å¼

`{{}}` è¿™ç§åŒå¤§æ‹¬å·çš„å½¢å¼ç§°ä¹‹ä¸ºæ’å€¼è¡¨è¾¾å¼

- å·®å€¼è¡¨è¾¾å¼çš„ä½œç”¨
  - åœ¨è¡¨è¾¾å¼ä¸­å¯ä»¥å†™ngä¸­çš„å˜é‡
  - å¯ä»¥æ˜¾ç¤ºå­—ç¬¦ä¸²
  - åœ¨è¡¨è¾¾å¼ä¸­å¯ä»¥è¿›è¡Œè®¡ç®—
  - å¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­å†™ä¸‰ç›®è¿ç®—ç¬¦
  - æ‰§è¡Œangularjså‡½æ•°

## è·¯ç”±

- é…ç½®é¡µé¢ä¹‹é—´çš„è·³è½¬å…³ç³»çš„
- é…ç½®é”šç‚¹ä¸é¡µé¢ä¹‹é—´çš„å¯¹åº”å…³ç³»

angularjs çš„è·¯ç”±åŠŸèƒ½æ˜¯ä½œä¸ºä¸€ä¸ªå•ç‹¬æ¨¡å—å­˜åœ¨çš„, è¦ä½¿ç”¨è·¯ç”±, éœ€è¦å°†è·¯ç”±æ¨¡å—ä½œä¸ºä¸»æ¨¡å—çš„ä¾èµ–

### angularjs ä¸­æ¨¡å—çš„ä¾èµ–æ­¥éª¤

- å°†è¦ä¾èµ–çš„æ¨¡å—æ–‡ä»¶å¼•å…¥é¡µé¢
- å°†æ¨¡å—çš„åå­—å†™åœ¨ä¸»æ¨¡å—çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­
  æ¨¡å—å: angular-route  =>  ngRouter
- è·¯ç”±çš„é…ç½®æ–¹æ³•

  ```javascript
  æ¨¡å—å¯¹è±¡.config(function($routerProvider){
    // è·¯ç”±çš„å…·ä½“é…ç½®è¦å†™åœ¨å›è°ƒå‡½æ•°ä¸­
    // $routerProvider è·¯ç”±å™¨é…ç½®å¯¹è±¡
    // when å½“...æ—¶ç”Ÿæ•ˆ
    $routerProvider.when('é”šç‚¹', {
      templateUrl:'æ¨¡æ¿æ–‡ä»¶è·¯å¾„ ç›¸å¯¹è·¯å¾„'
    })
  })
  ```

  ```html
  <!-- angularjsä¼šå°†è·å–åˆ°çš„æ¨¡æ¿æ–‡ä»¶å†…å®¹æ”¾åœ¨é¡µé¢ä¸­æœ‰ng-viewæŒ‡ä»¤çš„å…ƒç´ ä¸­  -->
  <div ng-view></div>
  ```

  ```html
  <body ng-app="myApp">

  <!-- æ³¨æ„å†™æ³• -->
  <a href="#!/index">é¦–é¡µ</a>
  <a href="#!/list">åˆ—è¡¨é¡µ</a>

  <div ng-view></div>

  <script src="node_modules/angular/angular.min.js"></script>
  <script src="node_modules/angular-route/angular-route.min.js"></script>
  <script>
    var app = angular.module('myApp',['ngRoute']);
    app.config(function($routeProvider){
      $routeProvider
        // æ³¨æ„å†™æ³•
        .when('/index',{
          // templateUrl:'./tpl/index.html', // localhost
          // template:'<div>æˆ‘æ˜¯é¦–é¡µ</div>', // file | localhost
          controller:'indexCtrl',
          templateUrl:'indexTpl' // file | localhost
        })
        .when('/list',{
          // templateUrl:'./tpl/list.html',
          // template:'<div>æˆ‘æ˜¯åˆ—è¡¨é¡µ</div>',
          controller:'listCtrl',
          templateUrl:'listTpl'
        })
        .otherwise('/index')
    });

    app.controller('indexCtrl',function($scope){
      $scope.msg = "æˆ‘æ˜¯é¦–é¡µmsg"
    })

    app.controller('listCtrl',function($scope){
      $scope.msg = "æˆ‘æ˜¯åˆ—è¡¨é¡µmsg"
    })
  </script>
  <script id="indexTpl" type="text/ng-template">
    <div>æˆ‘æ˜¯é¦–é¡µ indexTpl</div>
  </script>
  <script id="listTpl" type="text/ng-template">
    <div>æˆ‘æ˜¯åˆ—è¡¨é¡µ listTpl</div>
  </script>
  </body>
  ```

### è·¯ç”±ä¼ é€’å‚æ•°

éœ€æ±‚ï¼šä»åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µ å°†åˆ—è¡¨é¡µçš„æ–‡ç« IDä¼ é€’åˆ°è¯¦æƒ…é¡µ

è·¯ç”±ä¼ é€’å‚æ•°åˆ†ä¸ºä¸‰æ­¥

  1.åœ¨è¢«ä¼ é€’å‚æ•°é¡µé¢(è¯¦æƒ…é¡µ)çš„è·¯ç”±ä¸­é…ç½®å‚æ•°å ä½ç¬¦(ç±»ä¼¼äºå‡½æ•°çš„å½¢å‚)

  2.åœ¨ä¼ é€’å‚æ•°é¡µé¢(åˆ—è¡¨é¡µ)çš„è·³è½¬é“¾æ¥ä¸­å°†å®é™…çš„å‚æ•°ä¼ é€’è¿‡å»

  3.åœ¨è¢«ä¼ é€’å‚æ•°é¡µé¢(è¯¦æƒ…é¡µ)çš„æ§åˆ¶å™¨ä¸­è·å–ä¼ é€’è¿‡æ¥çš„å‚æ•°

```html
<body ng-app="myApp">

  <a href="#!/index">é¦–é¡µ</a>
  <a href="#!/list">åˆ—è¡¨é¡µ</a>

  <div ng-view></div>

  <script src="node_modules/angular/angular.min.js"></script>
  <script src="node_modules/angular-route/angular-route.js"></script>

  <script>
    var app = angular.module('myApp',['ngRoute'])

    app.config(function($routeProvider){

      $routeProvider
        .when('/index',{
          templateUrl:'indexTpl'
        })
        .when('/list',{
          templateUrl:'listTpl'
        })
        // æ³¨æ„å†™æ³•
        .when('/article/:id/:title',{
          templateUrl:'articleTpl',
          controller:'articleCtrl'
        })
        .otherwise('/index');
    })

    app.controller('articleCtrl',function($routeParams,$scope){

      // $routeParams å¯¹è±¡ é‡Œé¢ä¿å­˜è¿™ä¼ é€’è¿‡æ¥çš„è·¯ç”±å‚æ•°
      console.log($routeParams)
      $scope.msg = "å½“å‰é¡µé¢çš„IDæ˜¯" + $routeParams.id;

    })

  </script>
  <script type="text/ng-template" id="indexTpl">
    <div>æˆ‘æ˜¯é¦–é¡µ</div>
  </script>
  <script type="text/ng-template" id="listTpl">
    <ul>
      <li><a href="#!/article/1/æˆ‘æ˜¯ç¬¬1ç¯‡æ–‡ç« ">æˆ‘æ˜¯ç¬¬1ç¯‡æ–‡ç« </a></li>
      <li><a href="#!/article/2/æˆ‘æ˜¯ç¬¬2ç¯‡æ–‡ç« ">æˆ‘æ˜¯ç¬¬2ç¯‡æ–‡ç« </a></li>
      <li><a href="#!/article/3/æˆ‘æ˜¯ç¬¬3ç¯‡æ–‡ç« ">æˆ‘æ˜¯ç¬¬3ç¯‡æ–‡ç« </a></li>
    </ul>
  </script>
  <script type="text/ng-template" id="articleTpl">
    <div>æˆ‘æ˜¯è¯¦æƒ…é¡µ</div>
    {{ msg }}
  </script>
</body>
```

## æ§åˆ¶å™¨

### æ§åˆ¶å™¨ä¸­çš„ $scope ä¸ºä»€ä¹ˆä¸èƒ½æ”¹æˆå…¶ä»–çš„åå­—

- angularjs æ˜¯æ ¹æ®å½¢å‚åå­—ä¼ é€’å®å‚çš„ å¦‚æœåå­—æ”¹å˜äº† angularjs

### å®‰å…¨æ–¹å¼åˆ›å»ºæ§åˆ¶å™¨

```javascript
æ¨¡å—å¯¹è±¡.controller('åå­—', ['$scope', '$http', '$location', function($scope, $http, $location){

}])

```

```javascript
// å‹ç¼©å·¥å…·ä¸ä¼šå¯¹å­—ç¬¦ä¸²è¿›è¡Œå‹ç¼©
angular.module('myApp',[]).controller('demoCtrl', ['$scope', '$timeout', '$http', '$location', function (a, b, c, d){
  a.msg = 'æˆ‘æ˜¯msg'
}])
```

### angularjs ä¸­çš„ä½œç”¨åŸŸ

- å±€éƒ¨ä½œç”¨åŸŸ
  - angularjs ä¸­æ§åˆ¶å™¨æ§åˆ¶çš„åŒºåŸŸå°±æ˜¯ä¸€å—å±€éƒ¨ä½œç”¨åŸŸ
  - $scope ä»£è¡¨çš„å°±æ˜¯å±€éƒ¨ä½œç”¨åŸŸ
  - ä½œç”¨åŸŸåµŒå¥—çš„æƒ…å†µä¸‹ æ•°æ®æ˜¯ä¸€å±‚ä¸€å±‚é€šè¿‡ $scope å‘å¤–éƒ¨æŸ¥æ‰¾çš„ ç›´åˆ°å…¨å±€ä½œç”¨åŸŸ
  - ç›¸é‚»æ§åˆ¶å™¨ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ äº’ä¸å½±å“çš„
- å…¨å±€ä½œç”¨åŸŸ
  - $rootScopeä»£è¡¨çš„å°±æ˜¯å…¨å±€ä½œç”¨åŸŸ
  - æŒ‚è½½åˆ°å…¨å±€ä½œç”¨åŸŸä¸­çš„æ•°æ® æ¯ä¸ªæ§åˆ¶å™¨ä¸­éƒ½å¯ä»¥æ‹¿åˆ°

## å¸¸ç”¨æŒ‡ä»¤

ä»¥ `ng-` å¼€å¤´çš„å±æ€§,ç§°ä¹‹ä¸ºæŒ‡ä»¤

- æŒ‡ä»¤åˆ†ç±»:å†…ç½®æŒ‡ä»¤(æ™®é€šæŒ‡ä»¤ã€äº‹ä»¶æŒ‡ä»¤) è‡ªå®šä¹‰æŒ‡ä»¤

### æ™®é€šæŒ‡ä»¤

#### ng-app

ng-app æŒ‡å®šåº”ç”¨æ ¹å…ƒç´ ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æŒ‡å®šäº†æ­¤å±æ€§ã€‚

- é¡µé¢åŠ è½½å®Œæˆä»¥åangularjsä¼šåœ¨é¡µé¢ä¸­æŸ¥æ‰¾è¿™ä¸ªæŒ‡ä»¤
- æ²¡æœ‰æ‰¾åˆ°:angularjså°†ä¸ä¼šå¯åŠ¨
- æ‰¾åˆ°:angularjså°†ä¼šæ‰§è¡ŒæŒ‡ä»¤æ‰€åœ¨æ ‡ç­¾å†…éƒ¨åŒ…è£¹çš„ä»£ç 
- å¯ä»¥æ¥å—æ¨¡å—åå­—ä½œä¸ºå‚æ•° angularjsä¼šå°†å½“å‰é¡µé¢äº¤ç»™æŒ‡ä»¤æ‰€æŒ‡å®šçš„æ¨¡å—å»ç®¡ç†

#### ng-model

- è·å–è¡¨å•å…ƒç´ çš„å€¼
- å®ç°åŒå‘æ•°æ®ç»‘å®š

- åŒå‘ç»‘å®šï¼š
  - åŒå‘: html å’Œ js
  - æ•°æ®ï¼šangularjsä¸­çš„å˜é‡
  - html=>js  js=>html
  - htmlä¸­é€šè¿‡è¡¨å•å…ƒç´ å°†æ•°æ®æ”¹å˜ jsä¸­è·Ÿç€åŒæ­¥
  - jsä¸­å°†æ•°æ®æ”¹å˜ htmlä¸­è·Ÿç€åŒæ­¥
- å®ç°åŒå‘æ•°æ®ç»‘å®šçš„å¿…è¦æ¡ä»¶
  - å¿…é¡»æ˜¯è¡¨å•å…ƒç´  å¹¶ä¸”å…ƒç´ èº«ä¸Šæœ‰ng-modelæŒ‡ä»¤

#### ng-controller æŒ‡å®šæ§åˆ¶å™¨

####ã€€ng-init

- åˆå§‹åŒ–æ•°æ®

#### ng-repeat éå†æ•°æ®

ng-repeat å¯ä»¥éå†æ•°ç»„, å¯¹è±¡, æ•°ç»„ä¸­æ··åˆå¯¹è±¡

`ng-repeat="å˜é‡ in æ•°æ®"`

```html
<ul>
  <li ng-repeat="item in data">{{item}}</li>
  <li ng-repeat="p in persons">
    {{p.name}}---{{p.age}}
    <!-- ng-repeat æ”¯æŒåµŒå¥— -->
    <span ng-repeat="item in p.hobby">{{item}}</span>
  </li>
  <li ng-repeat="(key,value) in obj">{{key}}---{{value}}</li>
</ul>
```

```javascript
<script src="node_modules/angular/angular.min.js"></script>
<script>
angular.module('myApp', [])
  .controller('demoCtrl', ['$scope', function($scope){
    $scope.data = ['å°æ˜','å°çº¢','å°æ¢','å°èƒ–']
    $scope.person = [
      {name:'å°æ˜', age:18},
      {name:'å°çº¢', age:29},
      {name:'å°æ¢', age:20},
      {name:'å°èƒ–', age:32}
    ]
    $scope.obj = {
      name:'å°æ˜',
      age:25,
      hobby:['åƒé¥­','ç¡è§‰','æ‰“è±†è±†']
    }
  }])
</script>
```

**`ng-repeat` ä¸­çš„é»˜è®¤å‚æ•°**

- $index å½“å‰å¾ªç¯çš„ç´¢å¼•
- $first å½“å‰å¾ªç¯æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡å¾ªç¯
- $last å½“å‰å¾ªç¯æ˜¯å¦æ˜¯æœ€åä¸€æ¬¡å¾ªç¯
- $middle å½“å‰æ˜¯å¦æ˜¯ä¸­é—´é¡¹ é™¤äº†ç¬¬ä¸€é¡¹å’Œæœ€åä¸€é¡¹
- $even æ˜¯å¦æ˜¯å¶æ•°é¡¹
- $odd  æ˜¯å¦æ˜¯å¥‡æ•°é¡¹

```html
<!-- åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡å¾ªç¯ åŠ æ ·å¼ -->
<ul>
  <li ng-repeat="item in arr" class="{{$first ? 'first' : ''}}">{{item}}</li>
</ul>

<!-- é€šè¿‡å¥‡å¶æ•°å®ç°éš”è¡Œå˜è‰² -->
<style>
  .even{background:pink;}
  .odd{background:lightblue;}
</style>
<ul>
  <li ng-repeat="item in person" class="{{$even ? 'even' : 'odd'}}">
    ...
  </li>
</ul>
```

é»˜è®¤æƒ…å†µä¸‹éå†çš„æ•°ç»„ä¸­ä¸èƒ½æœ‰é‡å¤ç±»å‹çš„å€¼(åŸºæœ¬æ•°æ®ç±»å‹) å¦åˆ™ä¼šæŠ¥é”™ ä¿¡æ¯å¦‚ä¸‹

`[ngRepeat:dupes]  ng-repeatæŒ‡ä»¤è¢«æ„šå¼„(è°ƒæˆ)äº†`

å½“å¾ªç¯çš„æ•°æ®ä¸­æœ‰é‡å¤é¡¹æ—¶, **ä½¿ç”¨ `track by $index`**

```html
<ul>
  <li ng-repeat="item in arr track by $index">{{item}}</li>
</ul>
<script src="node_modules/angular/angular.js"></script>
<script>
  angular.module('myApp', [])
    .controller('demoCtrl', ['$scope', function($scope){
      $scope.arr = ['a','b','b','a','c','c','d']
    }])
</script>
```

#### ng-classæ§åˆ¶ç±»å

- 1.æŒ‡ä»¤çš„å€¼ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨
- 2.å¯¹è±¡çš„å±æ€§å€¼è½¬åŒ–ä¸ºå¸ƒå°”å€¼æ˜¯trueæ—¶,å°†å½“å‰çš„å±æ€§åä½œä¸ºç±»åæ·»åŠ åˆ°classå±æ€§ä¸­
- 3.å¯¹è±¡çš„å±æ€§å€¼è½¬åŒ–ä¸ºå¸ƒå°”å€¼æ˜¯falseæ—¶,å°†å½“å‰çš„å±æ€§åä»classå±æ€§ä¸­åˆ é™¤æ‰
- 4.å±æ€§å€¼å¯ä»¥æ˜¯æ•°æ®æ¨¡å‹,ä¹Ÿå¯ä»¥æ˜¯JSè¡¨è¾¾å¼

æ³¨æ„ï¼šangularä¸æ¨å´‡DOMæ“ä½œ,åœ¨å½“å‰ä¾‹å­ä¸­å¹¶æ²¡æœ‰ç›´æ¥æ“ä½œç±»åçš„JSè¯­å¥,è€Œæ˜¯é€šè¿‡æ•°æ®æ¨¡å‹isGreençš„å€¼æ˜¯trueè¿˜æ˜¯falseæ¥ç¡®å®šæ·»åŠ å“ªä¸ªé¢œè‰²çš„ç±»å,è‡³äºå¦‚ä½•æ·»åŠ åˆ°classå±æ€§ä¸­,ç”±angularæ›¿æˆ‘ä»¬å®Œæˆã€‚

```html
<body ng-app="myApp" ng-controller="demoCtrl">
  <style>
    button{
      width:120px;
      height:40px;
      border:none;
      outline:none;
      color:#fff;
      font-size:16px;
    }
    .red{
      background: red;
    }
    .green{
      background: green;
    }
  </style>

  <button ng-class="{'green':isGreen, 'red':!isGreen}" ng-click="setColor()">æŒ‰é’®</button>

  <script>
    angular.module('myApp',[]).
      controller('demo', ['$scope', function($scope){
        $scope.setColor = function(){
          $scope.isGreen = !$scope.isGreen
        }
      }])
  </script>
</body>
```

#### ng-bind ng-bind-template æ•°æ®ç»‘å®š è§£å†³è¡¨è¾¾å¼é—ªçƒé—®é¢˜

åœ¨angularæ²¡æœ‰è¢«åŠ è½½è¿›é¡µé¢ä¹‹å‰,æµè§ˆå™¨ä¼šå°†ä¸‹é¢çš„è¡¨è¾¾å¼å½“ä½œæ™®é€šå­—ç¬¦ä¸²æ˜¾ç¤ºåœ¨é¡µé¢ä¸­,angularåœ¨è¢«åŠ è½½è¿›é¡µé¢ä¹‹å,æ‰ä¼šå°†ä¸‹é¢çš„è¡¨è¾¾å¼æ›¿æ¢æˆäº†å¯¹åº”çš„æ•°æ®,è¿™æ ·å°±ä¼šå­˜åœ¨é—ªçƒé—®é¢˜

ç”¨æŒ‡ä»¤ng-bindç»‘å®šæ•°æ®è§£å†³è¿™ä¸ªé—®é¢˜
*ng-bindæŒ‡å®šæ˜¯ä¸“é—¨ç”¨æ¥åšæ•°æ®ç»‘å®šçš„*

è¯­æ³•:
`ng-bind="æ•°æ®"`
`ng-bind-template="{{æ•°æ®1}} {{æ•°æ®2}}"`

#### ng-non-bindable ä¸è§£æè¡¨è¾¾å¼

åŒ…å« ng-non-bindable æŒ‡ä»¤çš„åŒºåŸŸå…¶ä»–ä»»ä½•æŒ‡ä»¤éƒ½æ˜¯ä¸ç”Ÿæ•ˆçš„

```html
<div ng-non-bindable ng-init="msg='1122'">
  <!-- {{msgä¸ä¼šè§£æ}} -->
  {{ hello }} {{msg}}
</div>
<!-- init ä¹Ÿæ˜¯æ— æ•ˆçš„ -->
{{msg}}
```

#### ng-show ng-hide ng-if å…ƒç´ æ˜¾ç¤ºéšè—

- ng-show="å¸ƒå°”å€¼" æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—
- ng-hide="å¸ƒå°”å€¼" æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—
- ng-if="å¸ƒå°”å€¼" æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè— true æ˜¾ç¤º false éšè—
- ng-show ng-hide æ˜¯é€šè¿‡æ ·å¼çš„æ–¹å¼è¾¾åˆ°æ˜¾ç¤ºéšè—å…ƒç´ çš„ç›®çš„
- ng-if æ˜¯é€šè¿‡å¢åŠ å’Œåˆ é™¤DOMèŠ‚ç‚¹çš„æ–¹å¼è¾¾åˆ°æ˜¾ç¤ºéšè—å…ƒç´ çš„ç›®çš„

> ng-if ä¼šéšå¼çš„äº§ç”Ÿæ–°ä½œç”¨åŸŸï¼Œng-switchã€ng-includeç­‰åŠ¨æ€åˆ›å»ºä¸€å—ç•Œé¢çš„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
>
> è¿™æ ·ä¼šå¯¼è‡´ï¼Œåœ¨ ng-if ä¸­ç”¨åŸºæœ¬å˜é‡ç»‘å®š ng-modelï¼Œåœ¨å¤–å±‚ div ä¸­æŠŠæ­¤ model ç»‘å®šç»™å¦ä¸€ä¸ªæ˜¾ç¤ºåŒºåŸŸï¼Œå†…å±‚æ”¹å˜æ—¶ï¼Œå¤–å±‚ä¸ä¼šåŒæ­¥æ”¹å˜ã€‚å› ä¸ºæ­¤æ—¶å·²ç»æ˜¯ä¸¤ä¸ªå˜é‡äº†ã€‚
>
> ```html
> <p>{{name}}</p>
> <div ng-if="true">
>     <input type="text" ng-model="name">
> </div>
> ```
>
> `ng-show` ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä»–ä¸è‡ªå¸¦ä¸€çº§ä½œç”¨åŸŸã€‚
>
> é¿å…è¿™ç±»é—®é¢˜å‡ºç°çš„åŠæ³•æ˜¯ï¼Œå§‹ç»ˆå°†é¡µé¢ä¸­çš„å…ƒç´ ç»‘å®šåˆ°å¯¹è±¡çš„å±æ€§ï¼ˆdata.xï¼‰è€Œä¸æ˜¯ç›´æ¥ç»‘å®šåˆ°åŸºæœ¬å˜é‡ï¼ˆxï¼‰ä¸Šã€‚è¯¦è§[AngularJS ä¸­çš„ä½œç”¨åŸŸ](http://huangtengfei.com/2015/09/scope-in-angularjs/)

#### ng-switchã€ng-switch-when

ng-switch ng-switch-when æ˜¯ä¸€å¯¹æŒ‡ä»¤ç±», ä¼¼äºJSä¸­ switch case è¯­å¥

åŒ¹é…åˆ°å“ªé¡¹ å“ªé¡¹å°±æ˜¾ç¤º å…¶ä»–é¡¹å°±éšè—

å¸¸ç”¨äº åšå¤šä¸ªé€‰é¡¹å¡çš„æ˜¾ç¤ºå’Œéšè—

```html
<body ng-app ng-init="showNum=1">
  <div ng-switch="showNum">
    <button ng-click="showNum=1">æ˜¾ç¤º1</button>
    <button ng-click="showNum=2">æ˜¾ç¤º2</button>
    <button ng-click="showNum=3">æ˜¾ç¤º3</button>
    <div ng-switch-when="1">1</div>
    <div ng-switch-when="2">2</div>
    <div ng-switch-when="3">3</div>
  </div>
  <script src="node_modules/angular/angular.min.js"></script>
</body>
```

#### ng-options å¾ªç¯ä¸‹æ‹‰åˆ—è¡¨

### äº‹ä»¶æŒ‡ä»¤

#### ng-click ç»™æŒ‡ä»¤æ‰€åœ¨å…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶

#### ng-dblclick

#### ng-blur

#### ng-focus

#### ng-change

### å…¶ä»–æŒ‡ä»¤

#### ng-srcå¢å¼ºå›¾ç‰‡è·¯å¾„

#### ng-hrefå¢å¼ºåœ°å€

#### ng-includeå¼•å…¥æ¨¡æ¿

#### ng-disabledè¡¨å•ç¦ç”¨

#### ng-readonlyè¡¨å•åªè¯»

#### ng-checkedå•/å¤é€‰æ¡†è¡¨å•é€‰ä¸­

#### ng-selectedä¸‹æ‹‰æ¡†è¡¨å•é€‰ä¸­

## è‡ªå®šä¹‰æŒ‡ä»¤

**åœ¨ angularJS ä¸­, åªè¦æ“ä½œ dom å°±è¦æƒ³åˆ°*æŒ‡ä»¤***

### è‡ªå®šä¹‰æŒ‡ä»¤çš„ä½œç”¨

- å¢å¼º HTML æ ‡ç­¾çš„åŠŸèƒ½
- è‡ªå®šä¹‰ HTML æ ‡ç­¾
- æ“ä½œ DOM

### è‡ªå®šä¹‰æŒ‡ä»¤çš„è¯­æ³•

```javascript
æ¨¡å—å¯¹è±¡.directive('åå­—', ['$timeout', function($timeout){
  return {
    // TODO
  }
}])
```

#### è‡ªå®šä¹‰æŒ‡ä»¤ä»¥æ ‡ç­¾çš„æ–¹å¼å­˜åœ¨

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <!-- è‡ªå®šä¹‰æŒ‡ä»¤ä»¥æ ‡ç­¾çš„æ–¹å¼å­˜åœ¨ -->
  <my-header>
    <i>æ ‡ç­¾å†…éƒ¨å†…å®¹</i>
  </my-header>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .directive('myHeader', [function(){
        return {
          // ä½¿ç”¨çš„æ¨¡æ¿
          templateUrl: 'myHeaderTpl',
          // æ˜¯å¦ç”¨æ¨¡æ¿çš„å†…å®¹æ›¿æ¢æ‰è‡ªå®šä¹‰æ ‡ç­¾, è€Œä¸æ˜¯å°†æ¨¡æ¿çš„å†…ä¸­è¿½åŠ åˆ°è‡ªå®šä¹‰æ ‡ç­¾å†…éƒ¨
          relpace: true,
          // ä¿å­˜è‡ªå®šä¹‰æ ‡ç­¾ä¹‹é—´çš„å†…å®¹
          transclude: true
        }
      }])
      .controller('demoCtrl', ['$scope', function ($scope) {
        //
      }])
  </script>
  <script type="text/ng-template" id="myHeaderTpl">
    <h1>è¿™æ˜¯ä¸€ä¸ªmy-headerè‡ªå®šä¹‰æ ‡ç­¾<span ng-transclude></span></h1>
  </script>
</body>

```

#### è‡ªå®šä¹‰æŒ‡ä»¤ä»¥å±æ€§çš„æ–¹å¼å­˜åœ¨

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <div my-dir="red" title="123" abc="456">1111</div>
  <div my-dir="blue" title="123" abc="456">2222</div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .directive('myDir', [function () {
        return {
          // ä¸“é—¨å†™ dom æ“ä½œçš„åœ°æ–¹
          link: function (scope, element, attributes) {
            // element æŒ‡ä»¤æ‰€åœ¨çš„å…ƒç´ 
            // attributes æŒ‡ä»¤æ‰€åœ¨å…ƒç´ èº«ä¸Šçš„å±æ€§é›†åˆ
            element.css('background', attributes.myDir)
          }
        }
      }])
      .controller('demoCtrl', ['$scope', function ($scope) {

      }])
  </script>
</body>

```

#### è‡ªå®šä¹‰æŒ‡ä»¤ scope çš„ä½œç”¨åŸŸ

directive é»˜è®¤ä½¿ç”¨ scope:false ä¸ä¼šåˆ›å»ºå­ä½œç”¨åŸŸ
åˆ›å»ºçš„æŒ‡ä»¤ç»§æ‰¿äº†çˆ¶çº§ä½œç”¨åŸŸçš„ä¸€åˆ‡å±æ€§å’Œæ–¹æ³•
ä¹Ÿå°±æ˜¯åœ¨æŒ‡ä»¤æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡, å‡½æ•°

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <div my-dir></div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .directive('myDir', [function () {
        return {
          template:'<button ng-click="clickFn()">{{msg}}</button>',
          link:function(scope, element, attributes){
            scope.msg = "æˆ‘æ˜¯æŒ‡ä»¤ä¸­çš„msg",
            scope.clickFn = function(){
              alert('æˆ‘æ˜¯æŒ‡ä»¤ä¸­çš„Fn')
            }
          }
        }
      }])
      .controller('demoCtrl', ['$scope', function ($scope) {

      }])
  </script>
</body>
```

è®¾ç½® scope:true æ—¶, è‡ªå®šä¹‰æŒ‡ä»¤ä¼šäº§ç”Ÿç‹¬ç«‹çš„æ–°çš„ä½œç”¨åŸŸ
è¿™ä¸ªä½œç”¨åŸŸåŒæ ·ä¼šç»§æ‰¿çˆ¶ä½œç”¨åŸŸ, ä½†æ˜¯æŒ‡ä»¤å†…éƒ¨çš„æ•°æ®å‘ç”Ÿå˜åŒ–ä¸ä¼šå½±å“æŒ‡ä»¤å¤–
å³ä¸‹é¢ä¾‹å­æ‰§è¡Œåå¦‚å›¾æ‰€ç¤º:
![](images/angularjs/scopeä½œç”¨åŸŸ2.png)
è€Œæ²¡æœ‰è®¾ç½®æˆ–è€…è®¾ç½® scope:false æ—¶:
ç”±äºä¸¤æ¬¡æ‰§è¡Œåœ¨åŒä¸€ä¸ªä½œç”¨åŸŸ, ç¬¬äºŒæ¬¡æ‰§è¡Œæ—¶è¦†ç›–äº†ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ç»“æœ,
![](images/angularjs/scopeä½œç”¨åŸŸ1.png)
å½“ link ä¸­ ä¸è®¾ç½® scope.msg æ—¶, ä¼šå‘ä¸Šç»§ç»­å¯»æ‰¾åˆ°æ§åˆ¶å™¨,

```javascript
link: function (scope, element, attributs) {
  // scope.msg = attributs.myDir
}
```

![](images/angularjs/scopeä½œç”¨åŸŸ3.png)

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <div my-dir="æˆ‘æ˜¯ç¬¬ä¸€ä¸ªæŒ‰é’®"></div>
  <div my-dir="æˆ‘æ˜¯ç¬¬äºŒä¸ªæŒ‰é’®"></div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .directive('myDir', [function () {
        return {
          scope: true,
          template: '<button>{{msg}}</button>',
          link: function (scope, element, attributs) {
            scope.msg = attributs.myDir
          }
        }
      }])
      .controller('demoCtrl', ['$scope', function ($scope) {
        $scope.msg = 'æˆ‘æ˜¯æ§åˆ¶å™¨ä¸­çš„msg'
      }])
  </script>
</body>

```

#### è‡ªå®šä¹‰æŒ‡ä»¤çš„ç±»å‹

- æ ‡ç­¾æŒ‡ä»¤ E element
  `<my-dir></my-dir>`
- å±æ€§æŒ‡ä»¤ A attributes
  `<div my-dir=""></div>`
- æ ·å¼æŒ‡ä»¤ C class
  `<div class="my-dir"></div>`
- æ³¨é‡ŠæŒ‡ä»¤ M comment
  `<!-- directive:my-dir -->`
- æ³¨é‡ŠæŒ‡ä»¤éœ€è¦é…åˆ replace:true ä¸€èµ·ä½¿ç”¨
- é»˜è®¤æ”¯æŒ EA, ä½¿ç”¨æ ·å¼æŒ‡ä»¤, æ³¨é‡ŠæŒ‡ä»¤éœ€è¦é…ç½® restrict

```javascript
angular.module('myApp',[])
  .directive('myDir',[function(){
    return {
      restrict:'EACM',
      template:'<button ng-transclude></button>',
      transclude:true,
      replace:true
    }
  }])
```

## angular ä¸­çš„æ•°æ®è¯·æ±‚æ–¹å¼

### æ ‡å‡†æ–¹æ³• $http

```javascript
$http({
  url:'',
  method:'get/post',
  params:{ // get ä¼ å‚å‚æ•°
    a:1,
    b:2
  },
  data:{  // post ä¼ å‚å‚æ•°
    c:3,
    d:4
  }
}).then(function(res){
  // do success
}, function(err){
  // do error
})
```

### ç®€åŒ–æ–¹æ³• \$http.get() \$http.post()

```javascript
$http.get('url', {params:{a:1,b:2}}).then(function(res){
  // do success
})

$http.post('url', {c:3,d:4}).then(function(res){
  // do success
})
```

## jqLite

ä¸ºäº†æ–¹ä¾¿DOMæ“ä½œ angularjsç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªjqueryç²¾ç®€ç‰ˆ å«åšjqLite

$(åŸç”ŸJSå¯¹è±¡) å°†åŸç”ŸJSå¯¹è±¡è½¬æ¢æˆjqueryå¯¹è±¡ ç›®çš„æ˜¯ä¸ºäº†ä½¿ç”¨jqueryå¯¹è±¡ä¸‹é¢æä¾›æ–¹æ³•

angular.element(åŸç”ŸJSå¯¹è±¡) å°†åŸç”ŸJSå¯¹è±¡è½¬æ¢æˆjqLiteå¯¹è±¡ ç›®çš„æ˜¯ä¸ºäº†ä½¿ç”¨jqLiteå¯¹è±¡ä¸‹é¢æä¾›æ–¹æ³•

```html
<body ng-app="myApp" ng-controller="demoCtrl">
  <div id="box"></div>

  <script src="node_modules/angular/angular.js"></script>
  <script>
    angular.module('myApp', [])
      .controller('demoCtrl', ['$scope', function($scope){
        angular.element(document.getElementById('box')).css('backgroundColor', 'red')
      }])
  </script>
</body>
```

## æ§åˆ¶å™¨è¡¥å……

### ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼ä½¿ç”¨æ§åˆ¶å™¨

- angular å†…éƒ¨ä¼š new æ§åˆ¶å™¨å‡½æ•°
- demoCtrl as hello ä¸­ hello å°±æ˜¯ new å‡ºæ¥çš„å¯¹è±¡
- åœ¨è§†å›¾ä¸­ä½¿ç”¨ hello.å±æ€§ çš„æ–¹å¼è·å–å€¼
- é¢å‘å¯¹è±¡çš„æ–¹å¼å’Œ $scope å¯ä»¥åŒæ—¶ä½¿ç”¨

```html
<body ng-app="myApp" ng-controller="demoCtrl as hello">

  <p>{{hello.name}}</p>
  <p>{{age}}</p>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .controller('demoCtrl', ['$scope', function ($scope) {
        this.name = 'å­™æ‚Ÿç©º'
        $scope.age = 500
      }])
  </script>
</body>
```

### $scope.$watch

ç›‘æ§æ•°æ®çš„å˜åŒ–
åªè¦æ•°æ®å‘ç”Ÿå˜åŒ–, å°±æ‰§è¡Œå›è°ƒå‡½æ•°

å›è°ƒå‡½æ•°çš„å‚æ•°: newValue oldValue
æ³¨æ„: é¡µé¢ä¸€åŠ è½½, å°±ä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <input type="text" ng-model="val"> {{tips}}

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .controller('demoCtrl', ['$scope', function ($scope) {
        $scope.val = 'åˆå§‹å€¼'
        $scope.$watch('val', function(newValue, oldValue){
          if(newValue.length > 10){
            $scope.tips = 'å¤§äº10'
          } else {
            $scope.tips = 'å°äº10'
          }
        })
      }])
  </script>
</body>
```

### $scope.$apply

é€šè¿‡é angularjs æŒ‡ä»¤å°† angularjs ä¸­çš„æ•°æ®åšäº†æ”¹å˜ä»¥å, ç ´åäº† angularjs çš„åŒå‘ç»‘å®šæœºåˆ¶, éœ€è¦è°ƒç”¨ $scope.apply() æ–¹æ³•é€šçŸ¥ angularjs æ•°æ®å·²ç»æ”¹å˜, è§†å›¾è¦åšå‡ºç›¸åº”æ”¹å˜

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <input type="text" ng-model="val">
  <button onclick="clickFn()">è®¾ç½®å€¼</button>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .controller('demoCtrl', ['$scope', function ($scope) {
        // 1. åŸç”Ÿ js æ”¹å˜
        window.clickFn = function(){
          $scope.val = "123"
          $scope.$apply()
        }
        // 2.setTimeout
        setTimeout(function(){
          $scope.val = "456"
          $scope.$apply()
        }, 2000)
        // 3.ajax
        var xhr = new XMLHttpRequest()
        xhr.open('get', './test.json', true)
        xhr.send()
        xhr.onreadystatechange = function(){
          if(xhr.readyState == 4){
            if(xhr.status == 200){
              $scope.val = xhr.responseText
              $scope.$apply()
            }
          }
        }
      }])
  </script>
</body>
```

### è¿‡æ»¤å™¨

#### å†…ç½®è¿‡æ»¤å™¨

- è¯­æ³•: `{{ æ•°æ® | è¿‡æ»¤å™¨çš„åå­—:å‚æ•°1:å‚æ•°2}}`
- å¸¸è§çš„è¿‡æ»¤å™¨
  - currency è´§å¸è¿‡æ»¤å™¨
  - date æ—¥æœŸè¿‡æ»¤å™¨
  - filter è¿‡æ»¤æ•°æ®
    - æ¨¡ç³ŠåŒ¹é…
    - ç²¾ç¡®åŒ¹é…
  - orderBy æ ¹æ®å­—æ®µè¿›è¡Œæ’åº
  - limitTo é™åˆ¶è¿‡æ»¤å™¨
  - number æ•°å­—è¿‡æ»¤å™¨
  - uppercase å¤§å†™
  - lowercase å°å†™
  - json:ç©ºæ ¼æ•°  ç”¨äºè°ƒè¯• éœ€è¦é…åˆ `<pre>` ä½¿ç”¨

#### è‡ªå®šä¹‰è¿‡æ»¤å™¨

è¯­æ³•:

```javascript
æ¨¡å—å¯¹è±¡.filter('è¿‡æ»¤å™¨åå­—', [function(){
  return function(value){
    return xxx
  }
}])
```

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <div>{{telphone | phonestar }}</div>
  <div>{{str | firstLetter2Upper:1:2}}</div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .filter('phonestar', [function () {
        // éšè—ç”µè¯å·ç ä¸­é—´å››ä½
        return function (value) {
          return value.substr(0, 3) + 'xxxx' + value.substr(7)
        }
      }])
      .filter('firstLetter2Upper', [function () {
        return function (value, arg1, arg2) {
          console.log(arg1, arg2)
          return value.substr(0, 1).toUpperCase() + value.substr(1)
        }
      }])
      .controller('demoCtrl', ['$scope', function ($scope) {
        $scope.telphone = '13013101320'
        $scope.str = 'testfilter'
      }])
  </script>
</body>

```

### è‡ªå®šä¹‰æœåŠ¡

- ä½œç”¨: æŠ½è±¡å…¬å…±ä»£ç 
- è¯­æ³•:

```javascript
æ¨¡å—å¯¹è±¡.service('æœåŠ¡åç§°', [function(){
  this.name = 'zhangsan'
  this.say = function(){ }
}])
```

```html
<body ng-app="myApp">

  <div ng-controller="demoCtrlA">aaa</div>
  <div ng-controller="demoCtrlB">bbb</div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script>
    angular.module('myApp', [])
      .service('testService', [function () { // æ„é€ å‡½æ•°æ–¹å¼
        this.name = 'zhangsan'
        this.say = function () {
          alert(this.name)
        }
      }])
      .controller('demoCtrlA', ['$scope', 'testService', function ($scope, testService) { // testService æ˜¯ä¸Šé¢æ„é€ å‡½æ•°çš„å®ä¾‹
        // testService.say()
        testService.name = 'lisi'
      }])
      .controller('demoCtrlB', ['$scope', 'testService', function ($scope, testService) { // ä¸¤ä¸ª testService æ˜¯åŒä¸€ä¸ªå®ä¾‹
        testService.say()
      }])
  </script>
</body>
```

### ui-router

#### ui-router çš„åŸºæœ¬ä½¿ç”¨

```html
<body ng-app="myApp" ng-controller="demoCtrl">

  <!-- ä¸ä½¿ç”¨ <a href="#!/index"> çš„æ–¹å¼ -->
  <!-- è·¯ç”±è®¾ç½®ä¸­çš„åå­— -->
  <a ui-sref="index">é¦–é¡µ</a>
  <a ui-sref="list">åˆ—è¡¨é¡µ</a>

  <!-- ä¸æ˜¯ ng-view -->
  <div ui-view></div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script src="./node_modules/angular-ui-router/angular-ui-router.min.js"></script>
  <script>
    // å¼•å…¥ä¾èµ–
    angular.module('myApp', ['ui.router'])
      .config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {
        // $stateProvider é…ç½®è·¯ç”±çš„å¯¹è±¡
        $stateProvider
          .state({
            url: '/index',  // é”šç‚¹å€¼
            templateUrl: 'indexTpl', // æ¨¡æ¿
            name: 'index',  // è·¯ç”±åå­—
            controller: 'indexCtrl' // æ§åˆ¶å™¨
          })
          .state({
            url: '/list',
            templateUrl: 'listTpl',
            name: 'list',
            controller: 'listCtrl'
          })

        // æ²¡æœ‰åŒ¹é…çš„è·¯ç”±æ—¶çš„é»˜è®¤è·³è½¬
        $urlRouterProvider.otherwise('/index') // é”šç‚¹å€¼
      }])
      .controller('demoCtrl', ['$scope', function ($scope) {

      }])
      .controller('indexCtrl', ['$scope', function ($scope) {
        $scope.msg = 'indexCtrl'
      }])
      .controller('listCtrl', ['$scope', function ($scope) {
        $scope.msg = 'listCtrl'
      }])

  </script>
  <script type="text/ng-template" id="indexTpl">
    <div>æˆ‘æ˜¯é¦–é¡µ {{msg}} </div>
  </script>
  <script type="text/ng-template" id="listTpl">
    <div>æˆ‘æ˜¯åˆ—è¡¨é¡µ {{msg}} </div>
  </script>
</body>
```

#### ui-router ä¼ å‚

```html
<body ng-app="myApp">

  <a ui-sref="index">é¦–é¡µ</a>
  <!-- åœ¨è·¯ç”±çš„åå­—åé¢åŠ  () æ‹¬å·å†…æ˜¯ä¸€ä¸ªå¯¹è±¡ å°†å‚æ•°å†™å…¥å¯¹è±¡ä¸­ -->
  <a ui-sref="list({pagenumber:1, pagesize:10})">åˆ—è¡¨é¡µ</a>

  <div ui-view></div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script src="./node_modules/angular-ui-router/angular-ui-router.min.js"></script>
  <script>
    angular.module('myApp', ['ui.router'])
      .config(['$stateProvider', function ($stateProvider) {
        $stateProvider
          .state({
            name: 'index',
            url: '/index',
            template: '<div>é¦–é¡µ</div>'
          })
          .state({
            name: 'list',
            // å‚æ•°é…ç½®ä¸ ng-router ä¸€æ ·
            url: '/list/:pagesize/:pagenumber',
            template: '<div>åˆ—è¡¨é¡µ</div>',
            controller: 'listCtrl'
          })
      }])
      .controller('listCtrl', ['$stateParams', function ($stateParams) {
        console.log($stateParams)
      }])
  </script>
</body>
```

#### ui-router å¤šè§†å›¾

```html
<body ng-app="myApp">

  <a ui-sref="index">é¦–é¡µ</a>
  <a ui-sref="list">åˆ—è¡¨é¡µ</a>

  <div ui-view="view-a"></div>
  <div ui-view="view-b"></div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script src="./node_modules/angular-ui-router/angular-ui-router.min.js"></script>
  <script>
    angular.module('myApp', ['ui.router'])
      .config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {
        $stateProvider
          .state({
            url: '/index',
            views: {
              'view-a': {
                template: '<div>é¦–é¡µva</div>'
              },
              'view-b': {
                template: '<div>é¦–é¡µvb</div>'
              }
            },
            name: 'index'
          })
          .state({
            url: '/list',
            views: {
              'view-a': {
                template: '<div>åˆ—è¡¨é¡µva</div>'
              },
              'view-b': {
                template: '<div>åˆ—è¡¨é¡µvb</div>'
              }
            },
            name: 'list'
          })

        $urlRouterProvider.otherwise('/index')
      }])
  </script>
</body>
```

#### è·¯ç”±åµŒå¥—

```html
<body ng-app="myApp">

  <div ui-view></div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script src="./node_modules/angular-ui-router/angular-ui-router.min.js"></script>
  <script>
    angular.module('myApp', ['ui.router'])
      .config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {
        $stateProvider
          .state({
            url: '/nav',
            name: 'nav',
            templateUrl: 'navTpl'
          })
          .state({
            url: '/index',
            name: 'nav.index',
            templateUrl: 'indexTpl'
          })
          .state({
            url: '/list',
            name: 'nav.list',
            templateUrl: 'listTpl'
          })
          .state({
            url: '/comment',
            name: 'nav.list.comment',
            templateUrl: 'commentTpl'
          })
          .state({
            url: '/category',
            name: 'nav.list.category',
            templateUrl: 'categoryTpl'
          })
          .state({
            url: '/article',
            name: 'article',
            templateUrl: 'articleTpl'
          })

        $urlRouterProvider.otherwise('/nav')
      }])
  </script>
  <script type="text/ng-template" id="navTpl">
    <a ui-sref="nav.index">é¦–é¡µ</a>
    <a ui-sref="nav.list">åˆ—è¡¨é¡µ</a>
    <div ui-view></div>
  </script>
  <script type="text/ng-template" id="indexTpl">
    <div>æˆ‘æ˜¯é¦–é¡µ</div>
  </script>
  <script type="text/ng-template" id="listTpl">
    <div>æˆ‘æ˜¯åˆ—è¡¨é¡µ</div>
    <a ui-sref="nav.list.comment">è¯„è®º</a>
    <a ui-sref="nav.list.category">åˆ†ç±»</a>
    <div ui-view></div>
  </script>
  <script type="text/ng-template" id="commentTpl">
    <div>æˆ‘æ˜¯è¯„è®ºé¡µ</div>
  </script>
  <script type="text/ng-template" id="categoryTpl">
    <div>æˆ‘æ˜¯åˆ†ç±»é¡µ</div>
  </script>
  <script type="text/ng-template" id="articleTpl">
    <div>æˆ‘æ˜¯è¯¦æƒ…é¡µ</div>
  </script>
</body>
```

#### å•é¡µé¢åˆ—è¡¨å¤šè§†å›¾

```html
<body ng-app="myApp">

  <a ui-sref="index">é¦–é¡µ</a>
  <a ui-sref="list.child">åˆ—è¡¨é¡µ</a>

  <div ui-view></div>

  <script src="./node_modules/angular/angular.min.js"></script>
  <script src="./node_modules/angular-ui-router/angular-ui-router.min.js"></script>
  <script>
    angular.module('myApp', ['ui.router'])
      .config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {
        $stateProvider
          .state({
            url: '/index',
            templateUrl: 'indexTpl',
            name: 'index'
          })
          .state({
            url: '/list',
            templateUrl: 'listTpl',
            name: 'list'
          })
          .state({
            url: '/child',
            views: {
              'view-a': {
                template: '<div>va</div>'
              },
              'view-b': {
                template: '<div>vb</div>'
              }
            },
            name: 'list.child'
          })

        $urlRouterProvider.otherwise('/index')
      }])
  </script>

  <script type="text/ng-template" id="indexTpl">
    <div>æˆ‘æ˜¯é¦–é¡µ</div>
  </script>
  <script type="text/ng-template" id="listTpl">
    <div>æˆ‘æ˜¯åˆ—è¡¨é¡µ</div>
    <div ui-view="view-a"></div>
    <div ui-view="view-b"></div>
  </script>
</body>
```