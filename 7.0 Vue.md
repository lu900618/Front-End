---
create: 2017å¹´8æœˆ22æ—¥ 08:58:05
status: public
title: Vueç¬”è®°
author: 32401545@qq.com
modify: 2018å¹´04æœˆ06æ—¥ 18:47:49
---
# Vue

## åº“å’Œæ¡†æ¶çš„åŒºåˆ«

### åº“ Library

> åº“ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€äº›å‡½æ•°çš„é›†åˆã€‚æ¯ä¸€æ¬¡è°ƒç”¨å‡½æ•°ï¼Œå®ç°ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ï¼Œæ¥ç€æŠŠ**æ§åˆ¶æƒ**äº¤ç»™ä½¿ç”¨è€…ã€‚

- ä»£è¡¨ï¼šjQuery
- jQueryè¿™ä¸ªåº“çš„æ ¸å¿ƒï¼šDOMæ“ä½œï¼Œå³ï¼šå°è£…DOMæ“ä½œï¼Œç®€åŒ–DOMæ“ä½œ

### æ¡†æ¶ Framework

> æ¡†æ¶ï¼Œæ˜¯ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨æ¡†æ¶çš„ä¼šåï¼Œéœ€è¦ä½ æŠŠä»£ç æ”¾åˆ°æ¡†æ¶åˆé€‚çš„åœ°æ–¹ï¼Œæ¡†æ¶ä¼šåœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨ä½ çš„ä»£ç ã€‚

- æ¡†æ¶è§„å®šäº†è‡ªå·±çš„ç¼–ç¨‹æ–¹å¼ï¼Œæ˜¯ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚
- ä½¿ç”¨æ¡†æ¶çš„æ—¶å€™ï¼Œç”±æ¡†æ¶æ§åˆ¶ä¸€åˆ‡ï¼Œæˆ‘ä»¬åªè¦æŒ‰ç…§æŒ‡å®šçš„è§„åˆ™ä¹¦å†™ä»£ç ã€‚

### ä¸»è¦åŒºåˆ«

- You call Library, Framework calls you
- æ ¸å¿ƒç‚¹ï¼šè°èµ·åˆ°ä¸»å¯¼ä½œç”¨ï¼ˆæ§åˆ¶åè½¬ï¼‰
  - æ¡†æ¶ä¸­æ§åˆ¶æ•´ä¸ªæµç¨‹çš„æ˜¯æ¡†æ¶
  - ä½¿ç”¨åº“ï¼Œç”±å¼€å‘äººå‘˜å†³å®šå¦‚ä½•è°ƒç”¨åº“ä¸­æä¾›çš„æ–¹æ³•ï¼ˆè¾…åŠ©ï¼‰
- å¥½è±ååŸåˆ™ï¼šDon't call us, we'll call you.
- æ¡†æ¶çš„ä¾µå…¥æ€§å¾ˆé«˜ï¼ˆä»å¤´åˆ°å°¾ï¼‰

## MVVM

- MVVMï¼Œä¸€ç§æ›´å¥½çš„UIæ¨¡å¼è§£å†³æ–¹æ¡ˆ
- [ä» Script åˆ° Code Blocksã€Code Behindåˆ° MVCã€MVPã€MVVM - ç§‘æ™®](http://www.cnblogs.com/indream/p/3602348.html)

### MVC ç»„æˆ

- Mï¼šModel æ•°æ®æ¨¡å‹ - ä¸“é—¨ç”¨æ¥æ“ä½œæ•°æ®ï¼Œæ•°æ®çš„CRUD
- Vï¼šView è§†å›¾ - å¯¹äºå‰ç«¯æ¥è®²ï¼Œå°±æ˜¯é¡µé¢
- Cï¼šController æ§åˆ¶å™¨ - æ˜¯è§†å›¾å’Œæ•°æ®æ¨¡å‹çš„æ²Ÿé€šçš„æ¡¥æ¢ï¼Œç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘

### MVVM ç»„æˆ

![MVVMç»„æˆ](images/vue/mvvm.png)

- Mï¼šModel æ•°æ® - è´Ÿè´£æ•°æ®å­˜å‚¨ å¯¹åº”å‰ç«¯å°±æ˜¯ javascriptå¯¹è±¡
- Vï¼šView è§†å›¾ - è´Ÿè´£é¡µé¢å±•ç¤º å¯¹åº”å‰ç«¯å°±æ˜¯ DOM å¯¹è±¡
- VMï¼šViewModel è§†å›¾æ¨¡å‹ - è¿æ¥è§†å›¾å’Œæ•°æ®çš„ä¸­é—´ä»¶

### ä¼˜åŠ¿çš„å¯¹æ¯”

- MVC æ¨¡å¼ä¸­ï¼Œå°†åº”ç”¨ç¨‹åºåˆ†æˆäº†ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå®ç°äº†è´£ä»»åˆ†ç¦»
- åœ¨å‰ç«¯ä¸­ç»å¸¸è¦é€šè¿‡jsä»£ç æ¥è¿›è¡Œä¸€äº›é€»è¾‘æ“ä½œï¼Œæœ€ç»ˆè¦æŠŠè¿™äº›é€»è¾‘å‘ˆç°åœ¨é¡µé¢ä¸­ï¼Œä¹Ÿå°±æ˜¯DOMæ“ä½œ
- MVVMé€šè¿‡**åŒå‘æ•°æ®ç»‘å®š**è®©æ•°æ®è‡ªåŠ¨çš„åŒæ­¥
  - V ä¿®æ”¹ -> M
  - M ä¿®æ”¹ -> V
  - æ•°æ®æ˜¯æ ¸å¿ƒ
- Vue è¿™ç§ MVVM æ¨¡å¼çš„æ¡†æ¶ï¼Œä¸æ¨èå¼€å‘äººå‘˜æ‰‹åŠ¨æ“ä½œDOM

#### Vue ä¸­çš„ MVVM

åœ¨ MVVM ä¸‹, æ•°æ®å’Œè§†å›¾æ˜¯ä¸èƒ½ç›´æ¥é€šè®¯çš„, éœ€è¦é€šè¿‡ ViewModel è¿›è¡Œé€šè®¯, ViewModel é€šå¸¸è¦å®ç°ä¸€ä¸ª observe è§‚å¯Ÿè€…, å½“ æ•°æ® å‘ç”Ÿå˜åŒ–, observe èƒ½è§‚å¯Ÿåˆ°è¿™ç§å˜åŒ–, ç„¶åé€šçŸ¥åˆ°å¯¹åº”çš„ è§†å›¾ åšå‡ºæ›´æ–°; å½“ç”¨æˆ·æ“ä½œè§†å›¾, observe ä¹Ÿèƒ½è§‚å¯Ÿåˆ°ç›¸åº”çš„å˜åŒ–, ç„¶åé€šçŸ¥æ•°æ®åšæ”¹åŠ¨ -- è¿™å°±æ˜¯æ•°æ®çš„**åŒå‘ç»‘å®š**

- åŒå‘æ•°æ®ç»‘å®šï¼šå°† DOM äº Vue å®ä¾‹çš„ data æ•°æ®ç»‘å®šåˆ°ä¸€èµ·ï¼Œå½¼æ­¤äº’ç›¸å½±å“
  - æ•°æ®çš„æ”¹å˜ä¼šå½±å“DOMçš„æ”¹å˜
  - DOMçš„æ”¹å˜ä¼šå¼•èµ·æ•°æ®çš„å˜åŒ–
- [å‰–æVueåŸç†&å®ç°åŒå‘ç»‘å®šMVVM](https://segmentfault.com/a/1190000006599500)

## Vue èµ·æ­¥

### Vue çš„å…¼å®¹é—®é¢˜

`Vue.js` ä¸æ”¯æŒ `IE8` åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œå› ä¸º `Vue.js` ä½¿ç”¨äº† `IE8` ä¸èƒ½æ¨¡æ‹Ÿçš„ `ECMAScript5` ç‰¹æ€§ã€‚
`Vue.js` ä½¿ç”¨äº† `Object.definedProperty` ä¸­çš„ `setter` å’Œ `getter` ä»£ç†æ•°æ®ï¼Œç›‘æ§å¯¹æ•°æ®çš„æ“ä½œã€‚

### Vue çš„ç‰¹ç‚¹

- 1.æ˜“ç”¨
- 2.çµæ´»çš„æ¸è¿›å¼æ¡†æ¶
    *vueé‡‡ç”¨çš„æ˜¯æ¸è¿›å¼æ¡†æ¶ï¼Œä»€ä¹ˆæ˜¯æ¸è¿›å¼æ¡†æ¶ï¼Ÿæ— è®ºæ˜¯å•é¡µé¢çš„åº”ç”¨ç¨‹åºè¿˜æ˜¯å¤šé¡µé¢çš„åº”ç”¨ï¼Œé¦–å…ˆéƒ½éœ€è¦æ¸²æŸ“é¡µé¢æ¯ä¸€ä¸ªå­—æ®µã€‚*
    *å…³äºç»„ä»¶ç³»ç»Ÿï¼Œå…¶å®å°±æ˜¯æŠŠå…¬å…±çš„åœ°æ–¹æŠ½ç¦»å‡ºæ¥ä½œä¸ºä¸€ä¸ªç»„ä»¶ã€‚*
    *å•é¡µé¢å°±éœ€è¦è·¯ç”±ã€‚é¡¹ç›®æ¯”è¾ƒå¤æ‚åºå¤§ï¼Œå°±éœ€è¦å¼•è¿› vuex ï¼Œæ¥å®ç°é›†ä¸­ç®¡ç†çŠ¶æ€ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºå®Œæˆä¹‹åè¿˜éœ€è¦æ„å»ºå·¥å…·ä¼˜åŒ–buildæˆ‘ä»¬çš„ç³»ç»Ÿï¼Œæ¥æå‡æ•ˆç‡ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ„å»ºä¸€ä¸ªé¡¹ç›®ï¼Œä»ç®€å•åˆ°å¤æ‚ï¼Œéšç€ä¸šåŠ¡åº¦çš„æå‡ï¼Œä¸æ–­çš„åŠ å…¥å’Œå¼•ç”¨å…¶ä»–çš„æ’ä»¶ï¼Œæ¯”å¦‚å¦‚æœéœ€è¦å’Œåå°äº¤äº’ï¼Œå°±éœ€è¦å¼•å…¥ä¸€ä¸ªvue-resourceæ’ä»¶ï¼Œåšå•é¡µé¢åº”ç”¨ï¼Œå°±å¯ä»¥å¼•ç”¨ä¸€ä¸ªvue-routerï¼Œå½“æˆ‘ä»¬çš„é¡¹ç›®è¶³å¤Ÿå¤æ‚ï¼Œå°±å¼•ç”¨ vuex ï¼Œæœ€åé€šè¿‡builtå·¥å…·æ¥æ„å»ºæˆ‘ä»¬çš„ç³»ç»Ÿã€‚ä¹Ÿå°±æ˜¯è¯´åšé¡¹ç›®å¾—è¿‡ç¨‹ä¸­ç¼ºä»€ä¹ˆï¼Œè¡¥ä»€ä¹ˆï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„è¿‡ç¨‹ã€‚*
- 3.é«˜æ•ˆ
- 4.è™šæ‹ŸDOM
    *åœ¨å‰ç«¯çš„å·¥ä½œä¸­ï¼Œæ“ä½œDOMèŠ‚ç‚¹ä¹Ÿæ˜¯ä¸å¯é¿å…çš„ã€ä½†æ˜¯æ›´æ–°DOMæ—¶äº§ç”Ÿçš„è®¡ç®—éå¸¸æ˜‚è´µã€è€Œä¸”ä¸€äº›çç¢å’Œé¢‘ç¹çš„æ›´æ–°ä¼šä½¿é¡µé¢ç¼“æ…¢ï¼Œä½†æ˜¯è¿™ä¹Ÿæ˜¯ä¸å¯é¿å…çš„ï¼Œæ‰€ä»¥ vue ä»¥ä¸€ä¸ªJavaScript å¯¹è±¡æ›¿ä»£ DOM èŠ‚ç‚¹ï¼Œå³é‡‡ç”¨çš„è™šæ‹ŸDOMï¼Œæ›´æ–°è™šæ‹ŸDOMï¼Œå¹¶ä¸æ˜‚è´µï¼Œå› ä¸ºè¿™åªæ˜¯æ“ä½œJavaScriptå¯¹è±¡ï¼Œç„¶åæŠŠæ›´æ”¹çš„éƒ¨åˆ†æ›´æ–°åˆ°çœŸæ­£çš„DOMã€‚*
- 5.æ•°æ®é©±åŠ¨
  - 1.é¡µé¢ æ¯ä¸ªç‹¬ç«‹çš„å¯è§†/å¯äº¤äº’çš„åŒºåŸŸè§†ä¸ºä¸€ä¸ªç»„ä»¶ï¼›
  - 2.æ¯ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ªå·¥ç¨‹ç›®å½•ï¼Œç»„ä»¶æ‰€éœ€è¦çš„å„ç§èµ„æºåœ¨è¿™ä¸ªç›®å½•ä¸‹å°±è¿‘ç»´æŠ¤
  - 3.é¡µé¢ä¸è¿‡æ˜¯ç»„ä»¶çš„å®¹å™¨ï¼Œç»„ä»¶å¯ä»¥åµŒå¥—è‡ªç”±ç»„åˆå½¢å®Œæ•´çš„é¡µé¢

### ç”Ÿå‘½å‘¨æœŸ

![vueå£°æ˜å‘¨æœŸ](/images/vue/lifecycle.png)

- beforeCreated()
  - å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚å¯Ÿ(data observe) å’Œ event/watcher äº‹ä»¶é…ç½®å‰è¢«è°ƒç”¨
  - æ­¤æ—¶ç»„ä»¶çš„é€‰é¡¹è¿˜æœªæŒ‚è½½ï¼Œ**æ— æ³•è·å– data ä¸­çš„æ•°æ®ï¼Œmethods ä¸­çš„æ–¹æ³•**
  - å¯ä»¥åŠ å…¥ä¸€äº› loading...
- created()
  - å®ä¾‹å·²ç»åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨
  - **å¯ä»¥è°ƒç”¨ methods ä¸­çš„æ–¹æ³•ï¼Œæ”¹å˜ data ä¸­çš„æ•°æ®**
  - æŒ‚è½½é˜¶æ®µè¿˜æœªå¼€å§‹ï¼Œ$elå±æ€§ç›®å‰ä¸å¯è§
  - ç»“æŸloading...åšä¸€äº›åˆå§‹åŒ–ï¼Œå¯ä»¥è¿›è¡Œé¡µé¢è¯·æ±‚
- beforeMount()
  - ç›¸å…³çš„ render å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨
  - æ¨¡æ¿å·²ç»ç¼–è¯‘å¥½äº†ï¼Œå°šæœªæŒ‚åœ¨åˆ°é¡µé¢ï¼Œæ­¤æ—¶é¡µé¢è¿˜æ˜¯æ—§çš„
- mounted()
  - el è¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨æ”¹é’©å­ï¼Œå¯ä»¥**è¿›è¡ŒDOMæ“ä½œ**
  - åœ¨è¿™ä¸ªå‘¨æœŸå†…ï¼Œå¯¹dataçš„æ”¹å˜å¯ä»¥ç”Ÿæ•ˆã€‚ä½†æ˜¯è¦è¿›ä¸‹ä¸€è½®çš„domæ›´æ–°ï¼Œdomä¸Šçš„æ•°æ®æ‰ä¼šæ›´æ–°
  - beforeRouteEnter çš„ next çš„å‹¾å­æ¯”mountedè§¦å‘è¿˜è¦é å
  - æŒ‡ä»¤çš„ç”Ÿæ•ˆåœ¨mountedå‘¨æœŸä¹‹å‰
- beforeUpdate()
  - æ­¤å¤„è·å–çš„æ•°æ®æ˜¯æ›´æ–°åçš„æ•°æ®ï¼Œä½†æ˜¯è·å–é¡µé¢ä¸­çš„DOMå…ƒç´ æ˜¯æ›´æ–°ä¹‹å‰çš„
- updated()
  - å½“è¿™ä¸ªé’©å­è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOM å·²ç»æ›´æ–°
- beforeDestroy()
  - å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨
  - è¿™ä¸€æ­¥è¿˜å¯ä»¥ç”¨thisæ¥è·å–å®ä¾‹
  - ä¸€èˆ¬åœ¨è¿™ä¸€æ­¥åšä¸€äº›é‡ç½®çš„æ“ä½œã€‚æ¯”å¦‚æ¸…é™¤æ‰ç»„ä»¶ä¸­çš„ å®šæ—¶å™¨ å’Œ ç›‘å¬çš„domäº‹ä»¶
- destroyed()
  - Vue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯

### Hello Vue

```bash
// å®‰è£…
npm install -S vue
```

```html
<!-- æŒ‡å®švueç®¡ç†å†…å®¹åŒºåŸŸï¼Œéœ€è¦é€šè¿‡vueå±•ç¤ºçš„å†…å®¹éƒ½è¦æ”¾åˆ°æ‰¾ä¸ªå…ƒç´ ä¸­  é€šå¸¸æˆ‘ä»¬ä¹ŸæŠŠå®ƒå«åšè¾¹ç•Œ æ•°æ®åªåœ¨è¾¹ç•Œå†…éƒ¨è§£æ-->
<div id="app">{{ msg }}</div>

<!-- å¼•å…¥ vue.js -->
<script src="vue.js"></script>

<!-- ä½¿ç”¨ vue -->
<script>
  // Vueå®ä¾‹
  // æ³¨æ„1ï¼šåœ¨dataä¸­å£°æ˜æ•°æ®ä»¥åæ‰èƒ½ä½¿ç”¨æ•°æ®
  // æ³¨æ„2ï¼šå¯ä»¥é€šè¿‡ vm.$data æˆ–è€… vm.msg è®¿é—®åˆ° data ä¸­çš„æ‰€æœ‰å±æ€§
  var vm = new Vue({
    // elï¼šç±»å‹ï¼šå­—ç¬¦ä¸²æˆ–è€…æ˜¯ å…ƒç´ 
    // æä¾›ä¸€ä¸ªåœ¨é¡µé¢ä¸Šå·²å­˜åœ¨çš„ DOM å…ƒç´ ä½œä¸º Vue å®ä¾‹çš„æŒ‚è½½ç›®æ ‡, å¯ä»¥æ˜¯CSS é€‰æ‹©å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª HTMLElementå®ä¾‹ã€‚
    // åœ¨å®ä¾‹æŒ‚è½½ä¹‹å,å…ƒç´ ä¼šé€šè¿‡ vueå®ä¾‹.$elè®¿é—®ã€‚
    el: '#app',
    // Vue å®ä¾‹çš„æ•°æ®å¯¹è±¡ï¼Œç”¨äºç»™ View æä¾›æ•°æ®
    // dataï¼švueçš„æ ¸å¿ƒå±æ€§ï¼Œvueä¼šè‡ªåŠ¨ç›‘æµ‹ï¼Œdataé‡Œçš„æ•°æ®çš„å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°åœ¨ HTML æ ‡ç­¾ä¸Šã€‚
    // dataçš„ç±»å‹æ˜¯å¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå¦‚æœæ˜¯åœ¨ç»„ä»¶å¯¹è±¡ä¸­ï¼Œdataå¿…é¡»æ˜¯å‡½æ•°ç±»å‹ã€‚
    data: {
      msg: 'Hello Vue',
      number: 6
    },
    // { é”®ï¼šå‡½æ•°} { [key: string]: Function | { get: Function, set: Function } }
    // æ˜¯ Vue çš„è®¡ç®—å±æ€§ï¼Œåœ¨ vueçš„å®ä¾‹æ–¹æ³•é‡Œé¢ï¼Œthis éƒ½æŒ‡å‘ vue çš„å®ä¾‹(ä½†æ˜¯åœ¨æŸä¸€ä¸ªå‡½æ•°çš„å†…éƒ¨ï¼Œä½œç”¨åŸŸæ”¹å˜ï¼Œthis å°±ä¸èƒ½æŒ‡å‘ vue çš„å®ä¾‹äº†)ï¼Œæ‰€ä»¥åœ¨è®¡ç®—å±æ€§ä¸­å®šä¹‰çš„å‡½æ•°é‡Œé¢å¯ä»¥ç›´æ¥ä½¿ç”¨æŒ‡å‘ vue å®ä¾‹çš„ this
    computed: {
      xxx: function(){
        return this.number * 2
      }
    },
    // äº‹ä»¶çš„ç»‘å®šéƒ½éœ€è¦åœ¨ method ä¸­å®šä¹‰ä¸ç»‘å®šï¼Œå¯ä»¥ç”¨ vue å®ä¾‹ç›´è®¿é—®è¿™äº›æ–¹æ³•ï¼Œæ–¹æ³•ä¸­çš„ this è‡ªåŠ¨ç»‘å®šä¸º Vue å®ä¾‹ã€‚
    // æ³¨æ„ï¼šä¸åº”è¯¥ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ method å‡½æ•° (ä¾‹å¦‚ plus: () => this.a++)ã€‚ç†ç”±æ˜¯ç®­å¤´å‡½æ•°ç»‘å®šäº†çˆ¶çº§ä½œç”¨åŸŸçš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ this å°†ä¸ä¼šæŒ‰ç…§æœŸæœ›æŒ‡å‘ Vue å®ä¾‹ï¼Œthis.a å°†æ˜¯ undefinedã€‚
    methods:{},
    // watchçš„ç±»å‹{ [key: string]: string | Function | Object }
    // é”®æ˜¯éœ€è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå€¼æ˜¯å¯¹åº”å›è°ƒå‡½æ•°
    // ç›‘æµ‹å˜é‡çš„å˜åŒ–ï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„å›è°ƒå‡½æ•°
    // æ³¨æ„ï¼Œä¸åº”è¯¥ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ watcher å‡½æ•° (ä¾‹å¦‚ searchQuery: newValue => this.updateAutocomplete(newValue))ã€‚ç†ç”±æ˜¯ç®­å¤´å‡½æ•°ç»‘å®šäº†çˆ¶çº§ä½œç”¨åŸŸçš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ this å°†ä¸ä¼šæŒ‰ç…§æœŸæœ›æŒ‡å‘ Vue å®ä¾‹ï¼Œthis.updateAutocomplete å°†æ˜¯ undefinedã€‚
    watch:{
      // ç›‘æ§aå˜é‡å˜åŒ–çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ‰§è¡Œæ­¤å‡½æ•°
      a: function (val, oldVal) {
        console.log('new: %s, old: %s', val, oldVal)
      },
      // æ·±åº¦ watcher
      c: {
        handler: function (val, oldVal) { /* ... */ },
        deep: true
      },
      // åªç›‘è§†userå¯¹è±¡ä¸­çš„ageå±æ€§çš„å˜åŒ–
      'user.age': function (val, oldVal) { }
    },
  })
</script>
```

#### ç›‘è§†æ•°æ®å˜åŒ– - watch

- watch æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé”®æ˜¯éœ€è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå€¼æ˜¯å›è°ƒå‡½æ•°
- å½“è¡¨è¾¾å¼çš„å€¼å‘ç”Ÿå˜åŒ–åï¼Œä¼šè°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°å®Œæˆç›¸åº”çš„ç›‘è§†æ“ä½œ
- [vueæ–‡æ¡£](https://cn.vuejs.org/v2/api/#vm-watch)

#### è®¡ç®—å±æ€§

ç”¨äºé€šè¿‡å…¶ä»–çš„æ•°æ®è®¡ç®—å‡ºæ–°æ•°æ®ï¼Œåªæœ‰åœ¨ä»–çš„ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶æ‰ä¼šé‡æ–°æ±‚å€¼

å¥½å¤„: ç¼“å­˜äº†è®¡ç®—å‡ºçš„ç»“æœ, ä¼˜å…ˆè°ƒç”¨ç¼“å­˜æ•°æ® -- æé«˜ç¨‹åºçš„æ€§èƒ½

ä¸ `methods` çš„åŒºåˆ«: `methods` æ¯æ¬¡éƒ½ä¼šé‡æ–°è®¡ç®—

æ³¨æ„ï¼š

- `{{}}` ä¸­ä¸è¦æ”¾å¤ªå¤šçš„é€»è¾‘ï¼Œä¼šè®©æ¨¡æ¿è¿‡é‡ï¼Œéš¾ä»¥ç»´æŠ¤å’Œç†è§£
- `computed` ä¸­çš„å±æ€§ä¸èƒ½ä¸ `data` ä¸­çš„å±æ€§é‡åï¼Œä¼šæŠ¥é”™
- [computedå±æ€§åŸç†](http://www.cnblogs.com/kidney/p/7384835.html?utm_source=debugrun&utm_medium=referral)

## æŒ‡ä»¤

- è§£é‡Šï¼šæŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Šå±æ€§
- ä½œç”¨ï¼šå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOM

### `{{ }}` æ’å€¼è¡¨è¾¾å¼

- å·®å€¼è¡¨è¾¾å¼ä»dataä¸­è·å–æ•°æ®
- å½“æ•°æ®å¯¹è±¡çš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–ï¼Œå·®å€¼å¤„çš„å†…å®¹ä¹Ÿä¼šæ›´æ–°
- `{{}}` ä¸­ä¸èƒ½å‡ºç°jsè¯­å¥ï¼Œå¯ä»¥æ˜¯jsè¡¨è¾¾å¼ï¼Œæ¯”å¦‚è¿ç®—ï¼Œä¸‰å…ƒ
- `{{}}` ä¸èƒ½æ˜¯HTMLæ ‡ç­¾çš„å±æ€§ï¼Œå¦‚ `<h1 title="{{err}}">é”™è¯¯ç¤ºä¾‹</h1>`

```html
<div id="app">
  <div>
    <input type="text" v-model="name">
    <span>ä½ çš„åå­—å«: {{ name }}</span>
  </div>
  <div>
    <input type="text" v-model="age">
    <span>ä½ çš„å¹´é¾„æ˜¯: {{ age - 1 }}å‘¨å²</span>
  </div>
  <div>
    <input type="text" v-model="sex">
    <span v-show="sex">ä½ çš„æ€§åˆ«æ˜¯: {{ sex }}</span>
    <!-- 
    v-show  å’Œ  v-if çš„åŒºåˆ« 
    å¦‚æœ sex çš„å€¼ä¸å­˜åœ¨, éƒ½å¯ä»¥è¾¾åˆ°æ˜¾ç¤ºçš„ä½œç”¨
    v-show : ç›¸å½“äº display:none DOMä¸­å…ƒç´ ä»ç„¶å­˜åœ¨
    v-if : DOMåˆ é™¤     
    -->
  </div>
</div>
```

```javascript
var app = new Vue({
  el: '#app',  // è£…è½½çš„ä½ç½® cssé€‰æ‹©å™¨
  data: {  // æ•°æ® å¯ä»¥ app.name è®¿é—®
    name: 'AAA',
    age: 18,
    sex: null
  }
})
```

åœ¨æ§åˆ¶å°ä¿®æ”¹ `app.name` å®ä¾‹ä¹Ÿéšä¹‹æ›´æ–°

`{{ }}` ä¸­æ”¯æŒç®€å•çš„ `javascript` è¡¨è¾¾å¼:

- `{{ number + 1 }}`
- `{{ true ? 'yes' : 'no' }}`
- `{{ message.split('').reverse().join('') }}`

`{{ }}` ä¸­ä¸æ”¯æŒ:

- `{{ var a = 1 }}`
- `{{ if (true) { return true }}}`

### v-text / v-html

è§£å†³ç½‘é€Ÿç‰¹åˆ«æ…¢æ—¶, è¡¨è¾¾å¼é—ªçƒ

ä¸èƒ½å•ç‹¬ä½¿ç”¨, å¿…é¡»é…åˆæŸä¸€ä¸ªæ ‡ç­¾å…ƒç´ 

```html
<div id="app">
  <span v-text="name"></span>
  <div v-html="name"></div>
</div>
<script>
  new Vue({
    el: '#app',
    data: {
      name: 'zhangsan'
    }
  })
</script>
```

åŒºåˆ«: èƒ½å¦è§£ææ ‡ç­¾, ä½¿ç”¨ `v-html` æ¸²æŸ“æ•°æ®å¯èƒ½ä¼šå¯¼è‡´ XSSï¼ˆè·¨ç«™è„šæœ¬ï¼‰ æ”»å‡»

### v-bind

å¯ä»¥ç»™ HTML å…ƒç´ æˆ–è€…åŠ¨æ€ç»„ä»¶**åŠ¨æ€**åœ°ç»‘å®šä¸€ä¸ªæˆ–å¤šä¸ªç‰¹æ€§, å¦‚åŠ¨æ€ç»‘å®š style å’Œ classï¼Œä½¿ç”¨æ–¹å¼ï¼š`v-bind:class="expression"` or `:class="expression"`ï¼Œè¡¨è¾¾å¼çš„ç±»å‹ï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€å¯¹è±¡ï¼ˆé‡ç‚¹ï¼‰

ç”¨æ³•: `v-bind:å±æ€§å="å±æ€§å€¼"`

tips: `v-bind:` å¯ä»¥ç®€å†™æˆ `:`

```html
<div id="app">
  <!-- <a v-bind:class="klass" v-bind:href="url"> -->
  <!-- {active:isActive} {ç±»å:å‚æ•°} è¿™é‡Œæ˜¯ { } å•èŠ±æ‹¬å·-->
  <!-- {active:isActive} è¡¨ç¤º å½“ isActive æ˜¯ true çš„æ—¶å€™æ¿€æ´»-->
  <a :class="{active:isActive}" :href="url">
    <img :src="img">
  </a>
  <!-- 
    æ³¨æ„: url æ²¡æœ‰è¢« {{ }} åŒ…è£¹
    æµè§ˆå™¨è§£æåä¸ä¼šæ˜¾ç¤º v-bind
    -->
  <div v-bind:style="{ color: activeColor, 'font-size': fontSize + 'px' }"></div>
  <!-- baseStyles å’Œ overridingStyles éƒ½æ˜¯dataä¸­å®šä¹‰çš„å¯¹è±¡ -->
  <div v-bind:style="[baseStyles, overridingStyles]"></div>
</div>
```

```javascript
var app = new Vue({
  el: '#app',
  data: {
    url: 'http://www.baidu.com',
    img: 'https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3610571309,474794913&fm=58&u_exp_0=3043537694,141489503&fm_exp_0=86&bpow=500&bpoh=454',
    klass: 'btn btn-default',
    isActive: true
  }
})
```

### v-cloak

v-cloak æŒ‡ä»¤ä¿æŒåœ¨å…ƒç´ ä¸Šç›´åˆ°å…³è”å®ä¾‹ç»“æŸç¼–è¯‘åè‡ªåŠ¨ç§»é™¤ï¼Œv-cloak  å’Œ CSS è§„åˆ™å¦‚ [v-cloak] { display: none } ä¸€èµ·ç”¨æ—¶ï¼Œè¿™ä¸ªæŒ‡ä»¤å¯ä»¥éšè—æœªç¼–è¯‘çš„ Mustache æ ‡ç­¾ç›´åˆ°å®ä¾‹å‡†å¤‡å®Œæ¯•ã€‚

é€šå¸¸ç”¨æ¥é˜²æ­¢ `{{ }}` è¡¨è¾¾å¼é—ªçƒé—®é¢˜

```html
<style>
  [v-cloak] { display: none }
</style>
<span v-cloak>{{msg}}</span>
<script>
  new Vue({
    data:{
        msg:'hello ivan'
      }
  })
</script>
```

### v-on

ç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œè¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•çš„åå­—æˆ–ä¸€ä¸ªå†…è”è¯­å¥ï¼Œå¦‚æœæ²¡æœ‰ä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥çœç•¥ï¼Œç”¨åœ¨æ™®é€šçš„htmlå…ƒç´ ä¸Šæ—¶ï¼Œåªèƒ½ç›‘å¬ åŸç”Ÿ DOM äº‹ä»¶ã€‚ç”¨åœ¨è‡ªå®šä¹‰å…ƒç´ ç»„ä»¶ä¸Šæ—¶ï¼Œä¹Ÿå¯ä»¥ç›‘å¬å­ç»„ä»¶è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚

ç”¨æ³•:

- `v-on="{äº‹ä»¶å:äº‹ä»¶å‡½æ•°,äº‹ä»¶å2:äº‹ä»¶å‡½æ•°2}"`
- `v-on:äº‹ä»¶å="äº‹ä»¶å‡½æ•°"`
- `v-on` å¯ä»¥ç®€å†™ä¸º `@`
- äº‹ä»¶å‡½æ•°è¦å†™åœ¨ methods å‚æ•°é€‰é¡¹ä¸­

å¸¸ç”¨äº‹ä»¶:

- v-on:click
- v-on:keydown
- v-on:keyup
- v-on:mousedown
- v-on:mouseover
- v-on:submit
- ....

v-on æä¾›äº†å¾ˆå¤šäº‹ä»¶ä¿®é¥°ç¬¦æ¥è¾…åŠ©å®ç°ä¸€äº›åŠŸèƒ½:

- `.stop` - è°ƒç”¨ event.stopPropagation()ã€‚
- `.prevent` - è°ƒç”¨ event.preventDefault()ã€‚
- `.capture` - æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨ captureæ•è· æ¨¡å¼ã€‚
- `.self` - åªå½“äº‹ä»¶æ˜¯ä»ä¾¦å¬å™¨ç»‘å®šçš„å…ƒç´ æœ¬èº«è§¦å‘æ—¶æ‰è§¦å‘å›è°ƒã€‚
- `.once` - äº‹ä»¶åªè§¦å‘ä¸€æ¬¡
- `.{keyCode | keyAlias}` - åªå½“äº‹ä»¶æ˜¯ä»ä¾¦å¬å™¨ç»‘å®šçš„å…ƒç´ æœ¬èº«è§¦å‘æ—¶æ‰è§¦å‘å›è°ƒã€‚
- `.native` - ç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ã€‚

```html
<div id="app">
  <!-- æ³¨æ„: åœ¨ js ä¸­ onClick çš„ä½ç½® methodä¸­-->
  <!-- å¯ä»¥ä¼ å¯¹è±¡ -->
  <button v-on="{mouseenter:onEnter,mouseleave:onOut}" v-on:click="onClick">ç‚¹æˆ‘</button>
  <!-- <form v-on:submit="onSubmit($event)">
    <input type="text">
    <button type="submit">æäº¤</button>
  </form> -->

  <!-- vue å°è£…äº† preventDefault(); -->
  <!-- vue å°è£…äº† stopPropagation(); 
    v-on:submit.stop
    åœæ­¢å†’æ³¡äº‹ä»¶
  -->
  <!-- 
    é”®ç›˜äº‹ä»¶: å°è£…äº†keycodeäº‹ä»¶
    v-on:keyup.enter="onEnter"
    // é€šè¿‡å…¨å±€ config.keyCodes å¯¹è±¡è‡ªå®šä¹‰é”®å€¼ä¿®é¥°ç¬¦åˆ«å
    Vue.config.keyCodes.f2 = 113
    // ä½¿ç”¨è‡ªå®šä¹‰é”®å€¼ä¿®é¥°ç¬¦
    @keyup.enter.f2="add"
    -->
    <!-- v-on å¯ä»¥ç®€å†™ä¸º @ : @keyup.enter-->
  <form v-on:submit.prevent="onSubmit2">
    <input type="text">
    <button type="submit">æäº¤</button>
  </form>
</div>
```

```javascript
var app = new Vue({
  el: '#app',
  methods: {
    onClick: function () {
      console.log('clicked')
    },
    onEnter: function () {
      console.log('mouse enter')
    },
    onOut: function () {
      console.log('mouse leave')
    },
    onSubmit: function (e) {
      e.preventDefault()
      console.log('submitted')
    },
    onSubmit2: function () {
      console.log('submitted')
    }
  }
})
```

### v-for

ç”¨æ³•: `v-for="item in arr" :key="å”¯ä¸€å€¼"` æ–°ç‰ˆæœ¬éœ€è¦ç»‘å®š key

```html
<div id="app">
  <ul>
    <li v-for="food in foodList">
      {{ food.name }}:&yen;{{ food.discount ? food.price * food.discount : food.price}}
    </li>
  </ul>
  <!-- 
    v-for ä¹Ÿæ˜¯åŠ¨æ€çš„ ä¸€ç›´åœ¨ç›‘æ§ app.foodListæ•°æ®
    å½“åœ¨ console ä¸­æ‰§è¡Œ: 
    app.foodList.push({ name: 'é»„ç“œ',  price: 2, discount: 0.6}) çš„æ—¶å€™, 
    é¡µé¢çš„å±•ç¤ºä¹Ÿä¼šåˆ·æ–°
    -->
</div>
```

```javascript
var app = new Vue({
  el: '#app',
  data: {
    // foodList: ['é¦™è•‰', 'æ©˜å­', 'è‹¹æœ', 'æœˆé¥¼'],
    foodList: [
      { name: 'é¦™è•‰', price: 10, discount: 0.8 },
      { name: 'æ©˜å­', price: 20, discount: 1 },
      { name: 'è‹¹æœ', price: 3, discount: 0.5 },
      { name: 'æœˆé¥¼', price: 128 }
    ]
  }
})
```

éœ€è¦ç´¢å¼•å†™æ³•:

```html
<div v-for="(item, index) in items"></div>
<div v-for="(val, key) in user"></div>
<div v-for="(val, key, index) in user"></div>
```

### v-model åŒå‘æ•°æ®ç»‘å®š

```javascript
var app = new Vue({
  el: '#app',
  data: {
    sex: 'female',
    hobby: [], // å¯ä»¥è®¾ç½®é»˜è®¤å€¼
    article: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur sed laboriosam beatae eveniet quisquam ad fugiat enim, pariatur labore quas? ',
    from: 1,
    to: []
  }
})
```

#### v-model åœ¨ `input[text]` ä¸­çš„ä½¿ç”¨(ä¿®é¥°ç¬¦)

- `v-model.lazy`: æ‡’åŠ è½½, åœ¨ `input` å¤±å»ç„¦ç‚¹æ—¶æ›´æ–°
- `v-model.trim`: å»æ‰å‰åçš„ç©ºæ ¼, æ³¨æ„åœ¨ `password` ç±»å‹çš„ `input` çš„ä½¿ç”¨
- `v-model.number`: `Number` ç±»å‹æ•°æ®, é¿å…è·å–çš„ `input` æ•°æ®æ˜¯å­—ç¬¦ä¸²å¸¦æ¥çš„è¿ç®—é—®é¢˜

```html
<div id="app">
  <input type="text" v-model="name"><br>
  <input type="text" v-model.lazy="name"><br>
  <input type="text" v-model.trim="name"><br>
  <input type="text" v-model.number="price"><br>
  <!-- 
  å¤šç©ºæ ¼åœ¨ HTML ä¸­åªæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼, ä½†æ˜¯åœ¨æ•°æ®åº“ä¸­ä¼šè¿œæ´‹å­˜å‚¨
  <pre> æŒ‰åŸæ ¼å¼æ˜¾ç¤º
   -->
  <pre>{{ name }}</pre>
</div>
```

```javascript
var app = new Vue({
  el: '#app',
  data: {
    name: 'whh',
    price: 10
  }
})
```

#### v-model åœ¨ `input[radio]` ä¸­çš„ä½¿ç”¨

åœ¨ä½¿ç”¨ `<input type="radio" value="male" name="sex">` æ—¶, åŒä¸€ç»„çš„å¤šä¸ª `radioButton` è¦æ”¾åœ¨åŒä¸€ä¸ª `name` ä¸‹, åœ¨ Vue ä¸­, æ”¾åœ¨åŒä¸€ä¸ª `v-model` ä¸‹

```html
<div id="app">
  <label for="">
    ç”·:
    <input type="radio" value="male" v-model="sex">
  </label>
  <label for="">
    å¥³:
    <input type="radio" value="female" v-model="sex">
  </label>
  <br>
  {{sex}}
</div>
```

#### v-model åœ¨ `input[CheckBox]` ä¸­çš„ä½¿ç”¨

```html
<div id="app">
  <label for="">
    ç”·:
    <input type="checkbox" value="male" v-model="hobby">
  </label>
  <label for="">
    å¥³:
    <input type="checkbox" value="female" v-model="hobby">
  </label>
  <br>
  {{hobby}}
</div>
```

#### v-model åœ¨ textarea ä¸­çš„ä½¿ç”¨

```html
<div id="app">
  <textarea v-model="article" name="" id="" cols="30" rows="10"></textarea>
</div>
```

#### v-model åœ¨ select ä¸­çš„ä½¿ç”¨

```html
<div id="app">
<div>ä½ æ¥è‡ªå“ªé‡Œ?</div>
  <select v-model="from">
    <option value="1">hkong</option>
    <option value="2">dlu</option>
  </select> {{ from }}
  <hr>
  <div>ä½ è¦å»å“ªé‡Œ?</div>
  <select v-model="to" multiple>
    <option value="1">hkong</option>
    <option value="2">dlu</option>
  </select> {{ to }}
</div>
```

### v-if

ä½œç”¨ï¼šæ ¹æ®è¡¨è¾¾å¼çš„å€¼çš„çœŸå‡æ¡ä»¶æ¥å†³å®šæ˜¯å¦æ¸²æŸ“å…ƒç´ .
å¦‚æœæ¡ä»¶ä¸ºfalseä¸æ¸²æŸ“ï¼ˆè¾¾åˆ°éšè—å…ƒç´ çš„ç›®çš„ï¼‰ï¼Œä¸ºtrueåˆ™æ¸²æŸ“ã€‚
åœ¨åˆ‡æ¢æ—¶å…ƒç´ åŠå®ƒçš„æ•°æ®ç»‘å®šè¢«é”€æ¯å¹¶é‡å»º

```html
<div id="app">
  <div v-if="role === 'admin' || role === 'super_admin'">
    ç®¡ç†å‘˜ä½ å¥½
  </div>
  <div v-else-if="role === 'hr'">
    hrä½ å¥½
  </div>
  <div v-else>
    ä½ æ²¡æœ‰æƒé™è®¿é—®æ­¤é¡µé¢
  </div>
</div>
```

```javascript
var app = new Vue({
  el: '#app',
  data: {
    role: 'hr'
  }
})
```

### v-show

æ ¹æ®è¡¨è¾¾å¼çš„çœŸå‡å€¼ï¼Œåˆ‡æ¢å…ƒç´ çš„ display CSS å±æ€§ï¼Œå¦‚æœä¸º false ï¼Œåˆ™åœ¨å…ƒç´ ä¸Šæ·»åŠ  display:none æ¥éšè—å…ƒç´ ï¼Œå¦åˆ™ç§»é™¤ display:none å®ç°æ˜¾ç¤ºå…ƒç´ 

```html
<h1 v-show="isShow">Yes</h1>

new Vue({
  data:{
    isShow:true
  }
});

```

v-if å’Œ v-show çš„åŒºåˆ«ï¼š

  v-if å’Œ v-show éƒ½èƒ½å¤Ÿå®ç°å¯¹ä¸€ä¸ªå…ƒç´ çš„éšè—å’Œæ˜¾ç¤ºæ“ä½œ,

  ä½†æ˜¯ v-ifæ˜¯å°†è¿™ä¸ªå…ƒç´ æ·»åŠ æˆ–è€…ç§»é™¤åˆ°domä¸­ï¼Œ
  è€Œv-show æ˜¯åœ¨è¿™ä¸ªå…ƒç´ ä¸Šæ·»åŠ  style="display:none"å’Œç§»é™¤å®ƒæ¥æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—çš„

### æå‡æ€§èƒ½ï¼š v-pre

vueä¼šè·³è¿‡è¿™ä¸ªå…ƒç´ å’Œä»–çš„å­å…ƒç´ ç¼–è¯‘è¿‡ç¨‹ï¼Œå¯ä»¥ç”¨æ¥æ˜¾ç¤ºåŸå§‹ Mustache æ ‡ç­¾ã€‚è·³è¿‡å¤§é‡æ²¡æœ‰æŒ‡ä»¤çš„èŠ‚ç‚¹ä¼šåŠ å¿«ç¼–è¯‘ã€‚

```html
<span v-pre>{{this will not be compiled}}</span>
```

### æå‡æ€§èƒ½ï¼š v-once

vueåªæ¸²æŸ“å…ƒç´ å’Œç»„ä»¶ä¸€æ¬¡ã€‚éšåçš„é‡æ–°æ¸²æŸ“ï¼Œå…ƒç´ /ç»„ä»¶åŠå…¶æ‰€æœ‰çš„å­èŠ‚ç‚¹å°†è¢«è§†ä¸ºé™æ€å†…å®¹å¹¶è·³è¿‡ã€‚è¿™å¯ä»¥ç”¨äºä¼˜åŒ–æ›´æ–°æ€§èƒ½ã€‚

```html
<span v-once>This will never change: {{msg}}</span>
```

## è¿‡åº¦&åŠ¨ç”»

å°†éœ€è¦åŠ¨ç”»çš„ç»„ä»¶æ”¾å…¥ 'transition' ç»„ä»¶å†…éƒ¨

åœ¨è¿›å…¥/ç¦»å¼€çš„è¿‡æ¸¡ä¸­ï¼Œä¼šæœ‰ 6 ä¸ª class åˆ‡æ¢ã€‚
v-enterï¼šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥æ—¶ç”Ÿæ•ˆï¼Œåœ¨ä¸‹ä¸€ä¸ªå¸§ç§»é™¤ã€‚
v-enter-activeï¼šå®šä¹‰è¿‡æ¸¡çš„çŠ¶æ€ã€‚åœ¨å…ƒç´ æ•´ä¸ªè¿‡æ¸¡è¿‡ç¨‹ä¸­ä½œç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥æ—¶ç”Ÿæ•ˆï¼Œåœ¨ transition/animation å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚
v-enter-to: 2.1.8ç‰ˆåŠä»¥ä¸Š å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¸€å¸§åç”Ÿæ•ˆ (äºæ­¤åŒæ—¶ v-enter è¢«åˆ é™¤)ï¼Œåœ¨ transition/animation å®Œæˆä¹‹åç§»é™¤ã€‚
v-leave: å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç”Ÿæ•ˆï¼Œåœ¨ä¸‹ä¸€ä¸ªå¸§ç§»é™¤ã€‚
v-leave-activeï¼šå®šä¹‰è¿‡æ¸¡çš„çŠ¶æ€ã€‚åœ¨å…ƒç´ æ•´ä¸ªè¿‡æ¸¡è¿‡ç¨‹ä¸­ä½œç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘åç«‹å³ç”Ÿæ•ˆï¼Œåœ¨ transition/animation å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚
v-leave-to: 2.1.8ç‰ˆåŠä»¥ä¸Š å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¸€å¸§åç”Ÿæ•ˆ (äºæ­¤åŒæ—¶ v-leave è¢«åˆ é™¤)ï¼Œåœ¨ transition/animation å®Œæˆä¹‹åç§»é™¤ã€‚

// TODO

## vue-router è·¯ç”±

> vue-router æ˜¯vueä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ’ä»¶ã€‚

### å®‰è£…

```bash
npm i vue-router
```

### ä½¿ç”¨

```javascript
import VueRouter from 'vue-router'
Vue.use(VueRouter)
```

#### 1.æ¸²æŸ“æ ‡ç­¾

- router-view æ¸²æŸ“è·¯å¾„åŒ¹é…åˆ°çš„è§†å›¾ç»„ä»¶ï¼Œè¿˜å¯ä»¥å†…åµŒè‡ªå·±çš„ `<router-view>` ï¼Œæ ¹æ®åµŒå¥—è·¯å¾„æ¸²æŸ“åµŒå¥—ç»„ä»¶
- router-link è·¯ç”±ä¸­çš„åº”ç”¨å¯¼èˆª

#### 2.è·³è½¬

ä½¿ç”¨router-linkç»„ä»¶æ¥è¿›è¡Œå¯¼èˆªï¼Œé€šè¿‡ä¼ å…¥ `to` å±æ€§æŒ‡å®šé“¾æ¥
`<router-link to="/home">Go to Home</router-link>`
ä½†æ˜¯åŒæ ·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨jsä¸­é…ç½®è·¯ç”±çš„è·³è½¬

```js
// å®šä¹‰å¥½è·¯ç”±ç»„ä»¶

// index.js  é…ç½®è·¯ç”±è·³è½¬
export default new Router({routes})
var routes = [
  {
    path: '/home',
    name: 'Home',
    component: Home
  }
]
```

#### 3.ä¼ å€¼

é¡µé¢è·³è½¬æ—¶ç»å¸¸è¦æºå¸¦å‚æ•°ï¼Œæ‰€ä»¥è·¯ç”±è·³è½¬æ˜¯å¯ä»¥æºå¸¦å‚æ•°çš„ã€‚

```js
//åŠ¨æ€è·¯å¾„ä¼ å‚ï¼Œä»¥å†’å·å¼€å¤´
var routes = [
  {
    path: '/detail/:id',
    name: 'Detail',
    component: Detail
  }
]
```

å½“ç„¶åœ¨è·¯ç”±ä¸­ä¹Ÿéœ€è¦é…ç½®ä¸€ä¸‹ï¼š

```html
<router-link :to='{name:"Detail",params:{id:x.name}}'>
    ...
</router-link>
```

#### 4.å‚æ•°çš„æ¥æ”¶

ä¸€ä¸ªã€è·¯å¾„å‚æ•°ã€ä½¿ç”¨å†’å· : æ ‡è®°ã€‚å½“åŒ¹é…åˆ°ä¸€ä¸ªè·¯ç”±æ—¶ï¼Œå‚æ•°å€¼ä¼šè¢«è®¾ç½®åˆ° this.$route.paramsï¼Œå¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…ä½¿ç”¨ã€‚

```html
<template lang='html'>
    <div>
        <h1>æ°´æœè¯¦æƒ…é¡µ</h1>
        <h1>{{$route.params.id}}</h1>
    </div>
</template>
```

#### 5.æ¸²æŸ“

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`<router-link>` ä¼šè¢«æ¸²æŸ“æˆ `a` æ ‡ç­¾è¾“å‡ºï¼Œè€Œæœ‰æ—¶å€™ï¼Œä¸ºäº†é¡µé¢çš„è§„èŒƒå’Œç¾è§‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ›¿æ¢æˆå…¶ä»–æ ‡ç­¾ï¼Œæ¯”å¦‚ `<router-link
to:"/home" tag="div">` æœ€ç»ˆï¼Œ`<router-link>` å°±ä¼šä»¥divçš„å½¢å¼æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š

#### 6.è·¯ç”±çš„åµŒå¥—

```js
//æ­¤æ—¶ï¼Œæˆ‘ä»¬åœ¨marketç»„ä»¶ä¸‹ï¼Œé…ç½®2ä¸ªå­è·¯ç”±
var routes = [
  {
    path: '/market',
    name: 'Market',
    component: Market,
    children: [
      {
        path: '/',
        component: require('../pages/market/price')
      },
      {
        path: 'price',
        component: require('../pages/market/price')
      },
      {
        path: 'rank',
        component: require('../pages/market/rank')
      }
    ]
  }
]
export default new Router({routes})
```

```html
<template lang='html'>
    <div>
        <ul class="nav">
          <router-link to='/market/price' tag="li">å¤©å¤©ç‰¹ä»·</router-link>
          <router-link to='/market/rank' tag="li">çƒ­é”€æ¦œ</router-link>
        </ul>
        <router-view class='view'></router-view>
    </div>
</template>
```

è¿™æ ·æˆ‘ä»¬å¯¹åº”çš„å­è·¯ç”±å°±é…ç½®å¥½äº†ã€‚

#### 7.ç¼–ç¨‹å¼å¯¼èˆª

`router.push({ name: 'user', params: { userId: 123 }})`
`router.replace(location)`
è·Ÿ `router.push` å¾ˆåƒï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ï¼Œå®ƒä¸ä¼šå‘ `history` æ·»åŠ æ–°è®°å½•ï¼Œè€Œæ˜¯è·Ÿå®ƒçš„æ–¹æ³•åä¸€æ · â€”â€” æ›¿æ¢æ‰å½“å‰çš„ `history` è®°å½•
`router.replace({ name: 'Start'});`
`router.go(n)`
è¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ„æ€æ˜¯åœ¨ `history` è®°å½•ä¸­å‘å‰æˆ–è€…åé€€å¤šå°‘æ­¥ï¼Œç±»ä¼¼ `window.history.go(n)`ã€‚

## SPA å•é¡µé¢åº”ç”¨ç¨‹åº

> SPAï¼šSingle Page Applicationï¼Œå•é¡µé¢ web åº”ç”¨ï¼Œå°±æ˜¯åŠ è½½å•ä¸ª HTML é¡µé¢ï¼Œå¹¶åœ¨ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºäº¤äº’å¼åŠ¨æ€æ›´æ–°è¯¥é¡µé¢çš„ web åº”ç”¨ç¨‹åºã€‚

- å•é¡µé¢åº”ç”¨ç¨‹åº
  - åªæœ‰ç¬¬ä¸€æ¬¡ä¼šåŠ è½½é¡µé¢ï¼Œä»¥åçš„æ¯æ¬¡è¯·æ±‚ï¼Œä»…ä»…æ˜¯è·å–å¿…è¦çš„æ•°æ®ï¼Œç”±é¡µé¢ä¸­çš„jsè§£æå±•ç¤ºåœ¨é¡µé¢
- ä¼ ç»Ÿå¤šé¡µé¢åº”ç”¨ç¨‹åº
  - æ¯æ¬¡é’åæœåŠ¡å™¨è¿”å›çš„éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡µé¢

SPA çš„ä¼˜åŠ¿ï¼š

- å‡å°‘äº†è¯·æ±‚çš„ä½“ç§¯ï¼ŒåŠ å¿«é¡µé¢çš„å“åº”é€Ÿåº¦ï¼Œé™ä½äº†å¯¹æœåŠ¡å™¨çš„å‹åŠ›
- æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæµç•…

å®ç°çš„æ€è·¯ä¸æŠ€æœ¯ç‚¹ï¼š

- ajax
- é”šç‚¹ - `window.location.hash` #
- hashchange äº‹ä»¶ - `window.addEventListener('hashchange', function(){})`
- ç›‘å¬é”šç‚¹å€¼äº‹ä»¶çš„å˜åŒ–ï¼Œæ ¹æ®ä¸åŒçš„é”šç‚¹å€¼ï¼Œè¯·æ±‚ç›¸åº”çš„æ•°æ®
- åŸæœ¬ç”¨ä½œé¡µé¢å†…éƒ¨è¿›è¡Œè·³è½¬ï¼Œå®šä½å¹¶å±•ç¤ºç›¸åº”çš„å†…å®¹

### è·¯ç”±

- è·¯ç”±(å‰ç«¯è·¯ç”±)ï¼šæµè§ˆå™¨ä¸­hashå€¼ä¸å±•ç¤ºè§†å›¾å†…å®¹templateä¹‹é—´çš„å¯¹åº”è§„åˆ™

```html
<div id="app">
  <!-- 5 è·¯ç”±å…¥å£ æŒ‡å®šè·³è½¬åˆ°åªå®šå…¥å£ -->
  <router-link to="/home">é¦–é¡µ</router-link>
  <router-link to="/login">ç™»å½•</router-link>

  <!-- 7 è·¯ç”±å‡ºå£ï¼šç”¨æ¥å±•ç¤ºåŒ¹é…è·¯ç”±è§†å›¾å†…å®¹ -->
  <router-view></router-view>
</div>

<!-- 1 å¯¼å…¥ vue.js -->
<script src="./vue.js"></script>
<!-- 2 å¯¼å…¥ è·¯ç”±æ–‡ä»¶ -->
<script src="./node_modules/vue-router/dist/vue-router.js"></script>
<script>
  // 3 åˆ›å»ºä¸¤ä¸ªç»„ä»¶
  const Home = Vue.component('home', {
    template: '<h1>è¿™æ˜¯ Home ç»„ä»¶</h1>'
  })
  const Login = Vue.component('login', {
    template: '<h1>è¿™æ˜¯ Login ç»„ä»¶</h1>'
  })

  // 4 åˆ›å»ºè·¯ç”±å¯¹è±¡
  const router = new VueRouter({
    routes: [
      // è·¯å¾„å’Œç»„ä»¶ä¸€ä¸€å¯¹åº”
      { path: '/home', component: Home },
      { path: '/login', component: Login }
    ]
  })

  var vm = new Vue({
    el: '#app',
    // 6 å°†è·¯ç”±å®ä¾‹æŒ‚è½½åˆ°vueå®ä¾‹
    router
  })
</script>
```

### é‡å®šå‘

```javascript
//  å°†path é‡å®šå‘åˆ° redirect
{ path: '/', redirect: '/home' }
```

### è·¯ç”±å…¶ä»–é…ç½®

- è·¯ç”±å¯¼èˆªé«˜äº®
  - è¯´æ˜ï¼šå½“å‰åŒ¹é…çš„å¯¼èˆªé“¾æ¥ï¼Œä¼šè‡ªåŠ¨æ·»åŠ router-link-exact-active router-link-activeç±»
  - é…ç½®ï¼šlinkActiveClass
- åŒ¹é…è·¯ç”±æ¨¡å¼
  - é…ç½®ï¼šmode

```javascript
new Router({
  routers:[],
  mode: "hash", //é»˜è®¤hash | history å¯ä»¥è¾¾åˆ°éšè—åœ°å€æ hashå€¼ | abstractï¼Œå¦‚æœå‘ç°æ²¡æœ‰æµè§ˆå™¨çš„ API åˆ™å¼ºåˆ¶è¿›å…¥
  linkActiveClass : "now" //å½“å‰åŒ¹é…çš„å¯¼èˆªé“¾æ¥å°†è¢«è‡ªåŠ¨æ·»åŠ nowç±»
})
```

### è·¯ç”±å‚æ•°

- `/user/:id`
- å½“åŒ¹é…åˆ°ä¸€ä¸ªè·¯ç”±æ—¶ï¼Œå‚æ•°å€¼ä¼šè¢«è®¾ç½®åˆ° `this.$route.parmas`
- å¯ä»¥é€šè¿‡ $route.query è·å–åˆ° URL ä¸­çš„æŸ¥è¯¢å‚æ•°

```html
<!-- æ–¹å¼ä¸€ -->
<router-link to="/user/1001">å¦‚æœä½ éœ€è¦åœ¨æ¨¡ç‰ˆä¸­ä½¿ç”¨è·¯ç”±å‚æ•° å¯ä»¥è¿™æ · {{$router.params.id}}</router-link>
<!-- æ–¹å¼äºŒ -->
<router-link :to="{path:'/user',query:{name:'jack',age:18}}">ç”¨æˆ· Rose</router-link>

<script>
// è·¯ç”±
var router = new Router({
  routers : [
    // æ–¹å¼ä¸€ æ³¨æ„ åªæœ‰/user/1001è¿™ç§å½¢å¼èƒ½è¢«åŒ¹é… /user | /user/ | /user/1001/ éƒ½ä¸èƒ½è¢«åŒ¹é…
    // å°†æ¥é€šè¿‡$router.paramsè·å–å‚æ•°è¿”å› {id:1001}
    { path: '/user/:id', component: User },
    // æ–¹å¼äºŒ
    { path: "user" , component: User}
  ]
})

// Userç»„ä»¶ï¼š
const User = {
  template: `<div>User {{ $route.params.id }}</div>`
}
</script>
<!-- å¦‚æœè¦å­å•Švueå®ä¾‹ä¸­è·å–è·¯ç”±å‚æ•° åˆ™ä½¿ç”¨this.$router.params è·å–è·¯ç”±å‚æ•°å¯¹è±¡ -->
<!--  {{$router.query}} è·å–è·¯ç”±ä¸­çš„æŸ¥è¯¢å­—ç¬¦ä¸² è¿”å›å¯¹è±¡ -->
```

### åµŒå¥—è·¯ç”± - å­è·¯ç”±

- çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ router-viewï¼Œåœ¨è·¯ç”±è§„åˆ™ä¸­ä½¿ç”¨ children é…ç½®

```javascript
// çˆ¶ç»„ä»¶ï¼š
const User = Vue.component('user', {
  template: `
    <div class="user">
      <h2>User Center</h2>
      <router-link to="/user/profile">ä¸ªäººèµ„æ–™</router-link>
      <router-link to="/user/posts">å²—ä½</router-link>
      <!-- å­è·¯ç”±å±•ç¤ºåœ¨æ­¤å¤„ -->
      <router-view></router-view>
    </div>
    `
})

// å­ç»„ä»¶[ç®€å†™]
const UserProfile = {
  template: '<h3>ä¸ªäººèµ„æ–™ï¼šå¼ ä¸‰</h3>'
}
const UserPosts = {
  template: '<h3>å²—ä½ï¼šFE</h3>'
}

// è·¯ç”±
var router =new Router({
  routers : [
    {
      path: '/user',
      component: User,
      // å­è·¯ç”±é…ç½®ï¼š
      children: [
        {
          // å½“ /user/profile åŒ¹é…æˆåŠŸï¼Œ
          // UserProfile ä¼šè¢«æ¸²æŸ“åœ¨ User çš„ <router-view> ä¸­
          path: 'profile',
          component: UserProfile
        },
        {
          // å½“ /user/posts åŒ¹é…æˆåŠŸ
          // UserPosts ä¼šè¢«æ¸²æŸ“åœ¨ User çš„ <router-view> ä¸­
          path: 'posts',
          component: UserPosts
        }
      ]
    }
  ]
})
```

## ç»„ä»¶

    vueä¸­çš„ç»„ä»¶å…¶å®å°±æ˜¯é¡µé¢ç»„æˆçš„ä¸€éƒ¨åˆ†ï¼Œå¥½æ¯”æ˜¯ç”µè„‘ä¸­çš„æ¯ä¸€ä¸ªå…ƒä»¶ï¼ˆå¦‚ç¡¬ç›˜ï¼Œé”®ç›˜ï¼Œé¼ æ ‡ï¼‰ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå…·æœ‰ç‹¬ç«‹é€»è¾‘æˆ–ç•Œé¢ï¼ŒåŒæ—¶åˆèƒ½æ ¹æ®è§„å®šçš„æ¥å£è§„åˆ™è¿›è¡Œç›¸äº’èåˆï¼Œå˜æˆä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ã€‚

    é¡µé¢å°±æ˜¯ç”±ä¸€ä¸ªä¸ªç±»ä¼¼è¿™æ ·çš„éƒ¨åˆ†ç»„æˆçš„ï¼Œæ¯”å¦‚å¯¼èˆªï¼Œåˆ—è¡¨ï¼Œå¼¹çª—ï¼Œä¸‹æ‹‰åˆ—è¡¨ç­‰ã€‚é¡µé¢åªä¸è¿‡æ˜¯è¿™äº›ç»„ä»¶çš„å®¹å™¨ï¼Œç»„ä»¶è‡ªç”±ç»„åˆå½¢æˆåŠŸèƒ½å®Œæ•´çš„ç•Œé¢ï¼Œå½“ä¸éœ€è¦æŸä¸ªç»„ä»¶ï¼Œæˆ–è€…æƒ³è¦æ›¿æ¢æŸä¸ªç»„ä»¶æ—¶ï¼Œå¯ä»¥éšæ—¶è¿›è¡Œæ›¿æ¢å’Œåˆ é™¤ï¼Œè€Œä¸å½±å“æ•´ä¸ªåº”ç”¨çš„è¿è¡Œã€‚

    å‰ç«¯ç»„ä»¶åŒ–çš„æ ¸å¿ƒæ€è·¯å°±æ˜¯å°†ä¸€ä¸ªå·¨å¤§å¤æ‚çš„ä¸œè¥¿æ‹†åˆ†æˆé¢—ç²’åº¦åˆç†çš„å°ä¸œè¥¿ã€‚

### ä½¿ç”¨ç»„ä»¶çš„å¥½å¤„

1ã€æé«˜å¼€å‘æ•ˆç‡
2ã€æ–¹ä¾¿é‡å¤ä½¿ç”¨
3ã€ç®€åŒ–è°ƒè¯•æ­¥éª¤
4ã€æå‡æ•´ä¸ªé¡¹ç›®çš„å¯ç»´æŠ¤æ€§
5ã€ä¾¿äºååŒå¼€å‘

### vueä¸­çš„ç»„ä»¶

vue ä¸­çš„ç»„ä»¶æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾ï¼Œvue.jsçš„ç¼–è¯‘å™¨ä¸ºå®ƒæ·»åŠ ç‰¹æ®ŠåŠŸèƒ½
vue ä¸­çš„ç»„ä»¶ä¹Ÿå¯ä»¥æ‰©å±•åŸç”Ÿçš„ html å…ƒç´ ï¼Œå°è£…å¯é‡ç”¨çš„ä»£ç 

ç»„ä»¶çš„åŸºæœ¬ç»„æˆï¼šæ ·å¼ç»“æ„ï¼Œè¡Œä¸ºé€»è¾‘ï¼Œæ•°æ®

### å…¨å±€å®šä¹‰ç»„ä»¶

`Vue.component(æ ‡ç­¾å, å†…å®¹)` åœ¨ HTML ä¸­ Vue æ¥ç®¡çš„èŒƒå›´å†…éƒ½å¯ä»¥ä½¿ç”¨

```javascript
// 1.æ³¨å†Œå…¨å±€ç»„ä»¶
Vue.component('alert', {
  // templateï¼šæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œtemplateå¯ä»¥ä½¿æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ¨¡æ¿çš„id
  template: '<button @click="on_click">å¼¹å¼¹å¼¹</button>',
  // dataï¼šå¿…é¡»æ˜¯å‡½æ•°ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼ï¼Œæ˜¯å¯¹è±¡
  data () {
    return { }
  },
  methods: {
    on_click: function () {
      alert('Yo.')
    }
  }
})
```

```html
<!-- 2.ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ -->
<div id="example">
  <alert></alert>
</div>
```

extendï¼šä½¿ç”¨åŸºç¡€çš„Vueæ„é€ å™¨ï¼Œåˆ›å»ºä¸€ä¸ªâ€œå­ç±»â€ã€‚å‚æ•°æ˜¯ä¸€ä¸ªåŒ…å«ç»„ä»¶é€‰é¡¹çš„å¯¹è±¡

```javascript
// æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªæ‰©å±•è¿‡çš„æ„é€ å™¨
Vue.component('my-component', Vue.extend({ /* ... */ }))

// æ³¨å†Œç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ (è‡ªåŠ¨è°ƒç”¨ Vue.extend)
Vue.component('my-component', { /* ... */ })

var Home = Vue.extend({
  template: '',
  data() {}
})
Vue.component('home', Home)
```

### å±€éƒ¨å®šä¹‰ç»„ä»¶

åœ¨æŸä¸€ä¸ªå…·ä½“çš„vueå®ä¾‹ä¸­å®šä¹‰çš„ï¼Œåªèƒ½åœ¨è¿™ä¸ªvueå®ä¾‹ä¸­ä½¿ç”¨

```javascript
new Vue({
  el: '#seg1',
  components: {
    'my-component': {
      template: '<button @click="on_click">å¼¹å¼¹å¼¹</button>',
      methods: {
        on_click: function () {
          alert('Yo.')
        }
      }
    }
  }
})
```

### demo

```html
<div id="app">
  <like></like>
</div>

<template id="like-component-tpl">
  <button :class="{liked:liked}" @click="toggle_like">
  ğŸ‘  {{ likeCount }}
  </button>
</template>
```

```javascript
Vue.component('like', {
  // template: '<button :class="{liked:liked}" @click="toggle_like">ğŸ‘  {{ likeCount }}</button>',
  // template å†…å®¹è¿‡é•¿å¯ä»¥ä½¿ç”¨ es6 æ¨¡æ¿å­—ç¬¦ä¸²
  // ä¹Ÿå¯ä»¥å®šä¹‰åœ¨ HTML ä¸­æ¨¡æ¿ è¿™é‡Œä¼ é€‰æ‹©å™¨
  template: '#like-component-tpl',
  data: function () {  // ä½¿ç”¨function return é¿å…å¼•ç”¨èµ‹å€¼
    return {
      likeCount: 10,
      liked: false
    }
  },
  methods: {
    toggle_like: function () {
      if (!this.liked) {
        this.likeCount++
      } else {
        this.likeCount--
      }
      this.liked = !this.liked
    }
  }
})

new Vue({
  el: '#app'
})
```

### isç‰¹æ€§

åœ¨æŸäº›ç‰¹å®šçš„æ ‡ç­¾ä¸­åªèƒ½å­˜åœ¨æŒ‡å®šçš„æ ‡ç­¾ï¼Œå¦‚ ul>liï¼Œå¦‚æœè¦æµè§ˆå™¨æ­£ç¡®è¯†åˆ«åˆ™éœ€è¦ä½¿ç”¨ is

```html
<!-- æ¡ˆä¾‹ -->
<ul id="app">
  <!-- ä¸èƒ½è¯†åˆ« -->
  <my-li></my-li>
  <!-- æ­£å¸¸è¯†åˆ« -->
  <li is="my-li"></li>
</ul>

<script>
  var vm = new Vue({
    el: "#app",
    components : {
      myLi : {
        template : `<li>å†…å®¹</li>`
      }
    }
  })
</script>
```

## ç»„ä»¶é€šè®¯

### çˆ¶->å­ç»„ä»¶é€šè®¯

- é€šè¿‡å­ç»„ä»¶ props å±æ€§æ¥ä¼ é€’æ•°æ®ï¼Œpropsæ˜¯ä¸€ä¸ªæ•°ç»„
- ä¼ é€’è¿‡æ¥çš„ props çš„ç”¨æ³•ä¸ data ç›¸åŒ

```html
<div id="app">
  <alert msg="æ€ä¹ˆå¼¹å‡ºè¿™ä¸ªä¿¡æ¯" a="å¼¹å‡ºè¿™ä¸ª" b="è¿˜æœ‰è¿™ä¸ª"></alert>
  <user username="whh"></user>
  <user username="lhh"></user>
</div>
```

```javascript
Vue.component('alert', {
  template: '<button @click="onClick">å¼¹å¼¹å¼¹</button>',
  props: ['msg', 'a', 'b'], // æ³¨æ„è¿™ä¸ªå±æ€§
  methods: {
    onClick: function () {
      alert(`msg:${this.msg}  a:${this.a}  b:${this.b}`)
    }
  }
})
Vue.component('user', {
  template: '<a :href="\'/user/\' + username" >{{ username }}</a>',
  props: ['username'],
  methods: {

  }
})

new Vue({
  el: '#app'
})
```

### å­->çˆ¶ç»„ä»¶é€šè®¯

- çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼Œç”±å­ç»„ä»¶è°ƒç”¨è¿™ä¸ªå‡½æ•°(çˆ¶ç»„ä»¶ç”¨`$on`ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼Œ`$emit`è§¦å‘çˆ¶ç»„ä»¶æ‰€å…³å¿ƒçš„è‡ªå®šä¹‰äº‹ä»¶)
- å€ŸåŠ© vue ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶ (v-on:customFn="fn")

```html
<div id="app">
  <balance></balance>
</div>
```

```javascript
Vue.component('balance', {
  // 2. åœ¨å­ç»„ä»¶ä¸­ç»‘å®š v-on:è‡ªå®šä¹‰äº‹ä»¶å="çˆ¶ç»„ä»¶ä¸­çš„æ–¹æ³•" ==> @pfn="parentFn"
  template: `
  <div>
    <show @show-balance="show_balance"></show>
    <div v-if="show">
      æ‚¨çš„ä½™é¢: 00.00
    </div>
  </div>
  `,
  methods: {
    // 1. åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰æ–¹æ³• show-balance
    show_balance: function (data) {
      this.show = true
      console.log('data',data);
    }
  },
  data: function () {
    return {
      show: false
    }
  }
})

Vue.component('show', {
  template: `
  <button @click="onClick()">æ˜¾ç¤ºä½™é¢</button>
  `,
  methods: {
    onClick() {
      // 3. å­ç»„ä»¶ä¸­é€šè¿‡ $emit è§¦å‘å½“å‰å®ä¾‹ä¸Šçš„äº‹ä»¶ (äº‹ä»¶å, å‚æ•°)
      this.$emit('show-balance', {a: 1, b: 2})
    }
  }
})

var app = new Vue({
  el: '#app'
})
```

### å…„å¼Ÿç»„ä»¶é€šè®¯

```html
<div id="app">
  <huahua></huahua>
  <shuandan></shuandan>
</div>
```

```javascript
// åˆ©ç”¨ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹ä½œä¸ºäº‹ä»¶æ€»çº¿
var Event = new Vue()

Vue.component('huahua', {
  template: `<div>æˆ‘è¯´: <input @keyup="on_change" v-model="i_said"></div>`,
  methods: {
    on_change: function () {
      Event.$emit('huahua-said-something', this.i_said)
    }
  },
  data: function () {
    return {
      i_said: ''
    }
  }
})

Vue.component('shuandan', {
  template: `<div>èŠ±èŠ±è¯´: {{huahua_said}}</div>`,
  data: function () {
    return {
      huahua_said: ''
    }
  },
  mounted: function () { // åˆå§‹åŒ–å®Œæ¯•èŠ‚ç‚¹--é’©å­
    var that = this
    Event.$on('huahua-said-something', function (data) {
      that.huahua_said = data
    })
  }
})
new Vue({
  el: '#app'
})
```

### å†…å®¹åˆ†å‘ slot

åœ¨å­ç»„ä»¶æ¨¡æ¿ä¸­æœ‰slotæ ‡ç­¾ï¼Œè¢«è§†ä¸ºå¤‡ç”¨å†…å®¹ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸æä¾›å†…å®¹çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚å¦‚æœçˆ¶ç»„ä»¶æä¾›å†…å®¹ï¼Œåˆ™æŠŠæ•´ä¸ªå†…å®¹ç‰‡æ®µæ’å…¥åˆ°slotæ‰€åœ¨çš„DOMä½ç½®ï¼Œå¹¶æ›¿æ¢æ‰slotæ ‡ç­¾æœ¬èº«ã€‚
å­ç»„ä»¶æ¨¡æ¿ä¸­æ²¡æœ‰slotæ ‡ç­¾ï¼Œçˆ¶ç»„ä»¶æä¾›çš„å†…å®¹ä¼šè¢«æŠ›å¼ƒ
å¦‚æœæ›¿æ¢çš„å†…å®¹è¾ƒå¤šï¼Œå¯ä»¥ç›´æ¥ç”¨ä¸€ä¸ªtemplateæ›¿æ¢ã€‚

```html
<div id="app">
  <hello>
    <!-- å¦‚æœåªæœ‰ä¸€ä¸ªslotæ’æ§½ é‚£ä¹ˆä¸éœ€è¦æŒ‡å®šåç§° -->
    <p slot="æ’æ§½åç§°">çˆ¶ç»„ä»¶æä¾›çš„å†…å®¹ï¼Œæˆ‘çš„å­˜åœ¨ä¼šæ›¿æ¢å­ç»„ä»¶ä¸­slotæ ‡ç­¾å†…çš„å†…å®¹</p>
  </hello>
</div>

<script>
  new vue({
  el : "#app",
  components : {
    hello : {
      template : `
          <div>
            <p>æˆ‘æ˜¯å­ç»„ä»¶ä¸­çš„å†…å®¹(å¤‡ç”¨å†…å®¹ï¼Œå¦‚æœå­ç»„ä»¶ä¸­æœ‰å†…å®¹ä¼šæ›¿æ¢)</p>
            <slot name="åç§°"></slot>
          </div>
        `
    }
  }
})
</script>
```

å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŒ¿åçš„ slotï¼Œå¤„ç†é‚£äº›æ²¡æœ‰å¯¹åº”çš„ slot å†…å®¹ã€‚

```html
<div id="app">
  <h2>è‡ªå®šä¹‰ç»„ä»¶</h2>
  <custom>
    <!-- <div slot="one">æˆ‘æ›¿æ¢one</div> -->
    <div slot="three">æˆ‘æ›¿æ¢three</div>
    <div slot="two">æˆ‘æ›¿æ¢two</div>
    <span slot="two">æˆ‘æ›¿æ¢two</span>
    <div slot="one">æˆ‘æ›¿æ¢one</div>
    <div>æ›¿æ¢æ— åçš„slot</div>
    <div>æ›¿æ¢æ— åçš„slot</div>
    <div>æ›¿æ¢æ— åçš„slot</div>
  </custom>
</div>

<script>
  Vue.component('custom',{
    template:`
      <div>
          <slot name="one">
              <p>æˆ‘æ˜¯one</p>
          </slot>
          <slot name="two">
              <p>æˆ‘æ˜¯two</p>
          </slot>
          <slot name="three">
              <p>æˆ‘æ˜¯three</p>
          </slot>
          <slot>
              <p>æˆ‘æ˜¯æ— åçš„slot</p>
          </slot>
      </div>
    `
  })
  new Vue({
    el:"#app"
  })
</script>
```

### å•å‘æ•°æ®æµ

æ•°æ®ä»çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ï¼Œåªèƒ½å•é¡¹ç»‘å®šã€‚
åœ¨å­ç»„ä»¶å†…ä¸åº”è¯¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚
æ”¹å˜propçš„æƒ…å†µï¼š
1.ä½œä¸ºdataä¸­å±€éƒ¨æ•°æ®çš„åˆå§‹å€¼ä½¿ç”¨
2.ä½œä¸ºå­ç»„ä»¶ä¸­computedå±æ€§

### props éªŒè¯

åœ¨çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼å¾—æ—¶å€™ï¼Œä¸ºäº†é¿å…ä¸å¿…è¦çš„é”™è¯¯ï¼Œå¯ä»¥ç»™propçš„å€¼è¿›è¡Œç±»å‹è®¾å®šï¼Œè®©çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼å¾—æ—¶å€™ï¼Œæ›´åŠ å‡†ç¡®.

```js
props:{
  propA:Number, æ•°å€¼ç±»å‹
  propB:[String,Number],  å¤šç§ç±»å‹
  propC:{type:String,required:true},   å¿…å¡«é¡¹
  propD:{type:Number,default:100},   é»˜è®¤æ˜¯
  propE:{typr:Number,default:function(){return 1000}}
  propF:{validator:function(value){return value>2}}  ç¬¦åˆvalue>2çš„å€¼
}
```

ä¸æ˜ç™½ï¼Œçœ‹å¦‚ä¸‹æ¡ˆä¾‹ï¼Œè¦æ±‚çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼å¾—æ—¶å€™
1ã€è¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»ä¼ çš„
2ã€å€¼å¿…é¡»æ˜¯æ•°å€¼ç±»å‹çš„
3ã€é»˜è®¤å‚æ•°æ˜¯10

```js
Vue.component('custom-cmpontent',{
  data(){
    return {
      incrementCount:this.count //ä½œä¸ºå±€éƒ¨ç»„ä»¶çš„dataçš„åˆå§‹å€¼
    }
  },
  props:{
    count:{
      type:Number,   // ç±»å‹
      default:10,    // é»˜è®¤å€¼
      required:true  //å¿…é¡»è¦ä¼ å‚æ•°
    }
  },
  computed:{
    incrementCount2(){
      return this.incrementCount
    }
  },
  template:`
    <div>
        <h2>æˆ‘æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶</h2>
        <input type='button' value="æ”¹å˜countçš„å€¼" @click="changeCount">
        {{incrementCount}}
    </div>
  `,
  methods:{
    changeCount:function(value){
      this.incrementCount++;
      this.$emit('receive')
    }
  }
})
new Vue({
  el:"#app",
  data:{
    count:0
  },
  methods:{
    countH:function(){
      this.count++;
    }
  }
})
```

### è·å–ç»„ä»¶ refs

- vm.$refs æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŒæœ‰å·²ç»æ³¨å†Œè¿‡ ref çš„æ‰€æœ‰å­ç»„ä»¶
- åœ¨ HTML ä¸­ï¼Œæ·»åŠ  ref å±æ€§ï¼Œç„¶ååœ¨ js ä¸­é€šè¿‡ `vm.$refs.å±æ€§` æ¥è·å–
- å¦‚æœè·å–çš„æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆé€šè¿‡ ref å°±èƒ½è·å–åˆ°å­ç»„ä»¶çš„ data å’Œ methods

```html
<div id="app">
  <div ref="dv"></div>
  <my res="my"></my>
</div>

<script>
  new Vue({
    el : "#app",
    mounted() {
      this.$refs.dv //è·å–åˆ°å…ƒç´ 
      this.$refs.my //è·å–åˆ°ç»„ä»¶
    },
    components : {
      my : {
        template: `<a>sss</a>`
      }
    }
  })
</script>
```

## è¿‡æ»¤å™¨ filter

- ä½œç”¨ï¼šæ–‡æœ¬æ•°æ®çš„æ ¼å¼åŒ–
- è¿‡æ»¤å™¨å¯ä»¥ä½¿ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š `{{}}` å’Œ `v-bind`
- ä¸¤ç§è¿‡æ»¤å™¨ï¼šå…¨å±€è¿‡æ»¤å™¨ï¼Œå±€éƒ¨è¿‡æ»¤å™¨
- è¿‡æ»¤å™¨åº”è¯¥è¢«æ·»åŠ åœ¨JavaScriptè¡¨è¾¾å¼çš„å°¾éƒ¨ï¼Œç”±ç®¡é“ç¬¦æŒ‡ç¤º

### å…¨å±€è¿‡æ»¤å™¨

- å…¨å±€è¿‡æ»¤å™¨ï¼Œåœ¨ä»»ä½•ä¸€ä¸ª vue å®ä¾‹ä¸­éƒ½å¯ä»¥ä½¿ç”¨
- ä½¿ç”¨å…¨å±€è¿‡æ»¤å™¨ï¼Œéœ€è¦å…ˆåˆ›å»ºå…¨å±€è¿‡æ»¤å™¨ï¼Œå†åˆ›å»º vue å®ä¾‹
- æ˜¾ç¤ºçš„å†…å®¹ç”±è¿‡æ»¤å™¨çš„è¿”å›å€¼ç¡®å®š

```javascript
Vue.filter('filtername', function(value){
  // todo...
})
```

ç¤ºä¾‹ï¼š

```html
<div>{{ dataStr | data}}</div>
<div>{{ dataStr | data('YYYY-MM-DD hh:mm:ss')}}</div>

<script>
Vue.filter('data', function(value){
  // todo...
})
</script>
```

### å±€éƒ¨è¿‡æ»¤å™¨

å±€éƒ¨è¿‡æ»¤å™¨æ˜¯åœ¨æŸä¸€ä¸ªvueå®ä¾‹å†…åˆ›åˆ›å»ºçš„ï¼Œåªåœ¨å½“å‰å®ä¾‹ä¸­èµ·ä½œç”¨

```javascript
{
  data: { },
  filter: {
    filterName: function (value, format) { }
  }
}
```

### å¸¸è§è¿‡æ»¤å™¨

#### æ ¹æ®æ—¶é—´æˆ³è½¬åŒ–æˆæ—¶é—´æ ¼å¼ï¼šmm-dd hh:tt

```html
<div id="app">
    <!-- å°†æ—¶é—´æˆ³è½¬åŒ–ä¸ºæ—¶é—´ -->
    <h1>æ ¹æ®æ—¶é—´æˆ³è½¬åŒ–ä¸ºæ—¶é—´ï¼š{{ str | formatTime}}</h1>
  </div>

  <script type="text/javascript">
    var demo = new Vue({
      el: "#app",
      data: {
        str: 1517568434324,
      },
      filters: {
        formatTime: function (nS) {
          return ((new Date(nS).getMonth() + 1) < 10 ? '0' + (new Date(nS).getMonth() + 1) : (new Date(nS).getMonth() + 1)) + '-' + (new Date(nS).getDate() < 10 ? '0' + new Date(nS).getDate() : new Date(nS).getDate()) + ' ' + (new Date(nS).getHours() < 10 ? '0' + new Date(nS).getHours() : new Date(nS).getHours()) + ':' + (new Date(nS).getMinutes() < 10 ? '0' + new Date(nS).getMinutes() : new Date(nS).getMinutes())
        }
      }
    });

  </script>
```

#### æ ¹æ®æ—¶é—´æˆ³è½¬åŒ–æˆæ—¶é—´æ ¼å¼ï¼šå¤šé•¿æ—¶é—´ä¹‹å‰

```html
<div id="app">
    <!-- å°†æ—¶é—´æˆ³è½¬åŒ–ä¸ºæ—¶é—´ -->
    <h1>æ ¹æ®æ—¶é—´æˆ³è½¬åŒ–ä¸ºæ—¶é—´ï¼š{{ str | formatTime}}</h1>
  </div>

  <script type="text/javascript">
    var demo = new Vue({
      el: "#app",
      data: {
        str: 1517568434324,
      },
      filters: {
        formatTime: function (timespan) {
          var dateTime = new Date(timespan);
          var year = dateTime.getFullYear();
          var month = dateTime.getMonth() + 1;
          var day = dateTime.getDate();
          var hour = dateTime.getHours();
          var minute = dateTime.getMinutes();
          var second = dateTime.getSeconds();
          var now = new Date();
          var now_new = Date.parse(now);   //typescriptè½¬æ¢å†™æ³•

          var milliseconds = 0;
          var timeSpanStr;

          milliseconds = now_new - timespan;

          if (milliseconds <= 1000 * 60 * 1) {
            timeSpanStr = 'åˆšåˆš';
          }
          else if (milliseconds <= 1000 * 60 * 60) {
            timeSpanStr = Math.round((milliseconds / (1000 * 60))) + 'åˆ†é’Ÿå‰';
          }
          else if (milliseconds <= 1000 * 60 * 60 * 24) {
            timeSpanStr = Math.round(milliseconds / (1000 * 60 * 60)) + 'å°æ—¶å‰';
          }
          else if (milliseconds <= 1000 * 60 * 60 * 24 * 15) {
            timeSpanStr = Math.round(milliseconds / (1000 * 60 * 60 * 24)) + 'å¤©å‰';
          }
          else if (milliseconds > 1000 * 60 * 60 * 24 * 15 && year == now.getFullYear()) {
            timeSpanStr = month + '-' + day + ' ' + hour + ':' + minute;
          } else {
            timeSpanStr = year + '-' + month + '-' + day + ' ' + hour + ':' + minute;
          }
          return timeSpanStr;
        }
      }
    });

  </script>
```

## è‡ªå®šä¹‰æŒ‡ä»¤

- ä½œç”¨ï¼šè¿›è¡ŒDOMæ“ä½œ
- ä½¿ç”¨åœºæ™¯ï¼šå¯¹çº¯DOMå…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œæ¯”å¦‚ï¼šæ–‡æœ¬è·å–ç„¦ç‚¹
- [vueè‡ªå®šä¹‰æŒ‡ä»¤ç”¨æ³•å®ä¾‹](https://juejin.im/entry/58b7c5d8ac502e006cfee34a)

åœ¨vue2.0ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€šDOMå…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚

è‡ªå®šä¹‰æŒ‡ä»¤æœ€é‡è¦çš„ä¸¤ä¸ªéƒ¨åˆ†å°±æ˜¯é’©å­å‡½æ•°å’Œé’©å­å‡½æ•°å¯¹åº”çš„å‚æ•°ã€‚

### é’©å­å‡½æ•°

ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š

**bind**ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ï¼Œåœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚
**inserted**ï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ï¼ˆä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­ï¼‰ã€‚
**update**ï¼šæ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ VNode æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚
**componentUpdated**ï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚
**unbind**ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚

### é’©å­å‡½æ•°çš„å‚æ•°

![é’©å­å‡½æ•°çš„å‚æ•°](https://upload-images.jianshu.io/upload_images/3358344-72a6e790b51d502e.png)

### å…¨å±€æŒ‡ä»¤

```javascript
// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæŒ‡ä»¤åç§°
// ç¬¬äºŒä¸ªå‚æ•°ï¼šé…ç½®å¯¹è±¡ï¼ŒæŒ‡å®šæŒ‡ä»¤çš„é’©å­å‡½æ•°
Vue.directive('directiveName', {
  // bindä¸­åªèƒ½å¯¹å…ƒç´ è‡ªèº«è¿›è¡ŒDOMæ“ä½œï¼Œè€Œæ— æ³•å¯¹çˆ¶çº§å…ƒç´ æ“ä½œ
  // åªè°ƒç”¨ä¸€æ¬¡ æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚
  bind(elï¼Œbinding, vnode) {
    // å‚æ•°è¯¦è§£
    // elï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOM ã€‚
    // bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š
      // nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚
      // valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œç­‰å·åé¢çš„å€¼ ã€‚
      // oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚
      // expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ ç­‰å·åé¢çš„å­—ç¬¦ä¸² å½¢å¼
      // argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-my-directive:foo ä¸­ï¼Œå‚æ•°ä¸º "foo"ã€‚
      // modifiersï¼šæŒ‡ä»¤ä¿®é¥°ç¬¦ã€‚ä¾‹å¦‚ï¼šv-directive.foo.barä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true }ã€‚
    // vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ã€‚
    // oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚
  },
  // insertedè¿™ä¸ªé’©å­å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œå½“å‰å…ƒç´ å·²ç»æ’å…¥é¡µé¢ä¸­äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è·å–åˆ°çˆ¶çº§èŠ‚ç‚¹äº†
  inserted (  elï¼Œbinding, vnode ) {},
  //  DOMé‡æ–°æ¸²æŸ“å‰
  update(elï¼Œbinding, vnode,oldVnode) {},
  // DOMé‡æ–°æ¸²æŸ“å
  componentUpdated ( elï¼Œbinding, vnode,oldVnode ) {},
  // åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨
  unbind ( el ) {
    // æŒ‡ä»¤æ‰€åœ¨çš„å…ƒç´ åœ¨é¡µé¢ä¸­æ¶ˆå¤±ï¼Œè§¦å‘
  }
})
// ç®€å†™ å¦‚æœä½ æƒ³åœ¨ bind å’Œ update æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­:
Vue.directive('è‡ªå®šä¹‰æŒ‡ä»¤å', function(el, binding){})
// ä¾‹ï¼š
Vue.directive('color', function(el, binding) {
  el.style.color = binging.value
})
// ä½¿ç”¨ æ³¨æ„ç›´æ¥äº›ä¼šè¢«iæˆdataä¸­çš„æ•°æ®â€œredâ€ éœ€è¦å­—ç¬¦ä¸²åˆ™åµŒå¥—å¼•å·"'red'"
<p v-color="'red'"></p>
```

### å±€éƒ¨æŒ‡ä»¤

```javascript
var vm = new Vue({
  el : "#app",
  directives: {
    directiveName: { }
  }
})
```

### å¸¸è§è‡ªå®šä¹‰æŒ‡ä»¤

#### 1ã€åœ¨å›¾ç‰‡æœªå®ŒæˆåŠ è½½å‰ï¼Œç”¨éšæœºçš„èƒŒæ™¯è‰²å ä½ï¼Œå›¾ç‰‡åŠ è½½å®Œæˆåæ‰ç›´æ¥æ¸²æŸ“å‡ºæ¥ã€‚

```html
<div id="app" >
  <div v-img='val.url'  v-for="val in list"></div>
</div>

<script>
Vue.directive('img', {
  inserted:function (el, binding) {
    var color = Math.floor(Math.random()*1000000);
    el.style.backgroundColor = "#" + color;

    var img = new Image();
    img.src = binding.value;
    img.onload = function(){
      el.style.backgroundImage = 'url('+ binding.value +')'
    }
  }
})
new Vue({
  el: '#app',
  data: {
    list:[
      {url:'http://i0.jrjimg.cn/zqt-red-1000/focus/focus2017YMZ/Billboard/img/tan04.jpg'},
      {url:'http://i0.jrjimg.cn/zqt-red-1000/focus/focus2017YMZ/Billboard/img/tan03.jpg'},
      {url:'http://i0.jrjimg.cn/zqt-red-1000/focus/focus2017YMZ/Billboard/img/tan04.jpg'}
    ]
  }
})
```

#### 2ã€è‡ªå®šä¹‰æŒ‡ä»¤çš„ç¬¬äºŒç”¨å¤„æ˜¯ç”¨äºé›†æˆç¬¬ä¸‰æ–¹æ’ä»¶ã€‚

æ¯”å¦‚å†™æ–‡æ¡£é€šå¸¸ä¼šç”¨åˆ°highlight.jsï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å…¶å°è£…ä¸ºä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œè¿™æ ·highlight.jså°±å˜æˆäº†Vueçš„ä¸€ä¸ªæ–°åŠŸèƒ½

```js
var hljs = require('highlight.js)
Vue.directive('highlight', function(el){
  hljs.highlightBlock(el)
})
```

```html
<pre>
<code v-highlight>&lt;alert-menu
  :menudata="menu"
  :e="eventObj"
  ref="menu"
  v-on:menuEvent="handle"&gt;
&lt;/alert-menu&gt;</code>
</pre>
```

## axios

- ä»¥Promiseä¸ºåŸºç¡€çš„HTTPå®¢æˆ·ç«¯ï¼Œé€‚ç”¨äºæµè§ˆå™¨å’Œnode.js
- å°è£…ajaxï¼Œç”¨æ¥å‘é€è¯·æ±‚ï¼Œå¼‚æ­¥è·å–æ•°æ®

```javascript
---
// é…åˆ webpack ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š
import Vue from 'vue'
import axios from 'axios'
// å°† axios æ·»åŠ åˆ° Vue.prototype ä¸­
Vue.prototype.$axios = axios

---
// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š
methods: {
  getData() {
    this.$axios.get('url')
      .then(res => {})
      .catch(err => {})
  }
}

---
// APIä½¿ç”¨æ–¹å¼ï¼š

axios.get(url[, config])
axios.post(url[, data[, config]])
axios(url[, config])
axios(config)
```

### get è¯·æ±‚

```javascript
const url = 'http://vue.studyit.io/api/getnewslist'

// urlä¸­å¸¦æœ‰queryå‚æ•°
axios.get('/user?id=89')
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });

// urlå’Œå‚æ•°åˆ†ç¦»ï¼Œä½¿ç”¨å¯¹è±¡
axios.get('/user', {
  params: {
    id: 12345
  }
})
```

### postè¯·æ±‚

- é»˜è®¤æƒ…å†µä¸‹ï¼Œaxiosä¼šå°†jså¯¹è±¡åºåˆ—åŒ–ä¸ºJSONå¯¹è±¡ã€‚ä¸ºäº†ä½¿ç”¨ `application/x-www-form-urlencode` æ ¼å¼å‘é€è¯·æ±‚ã€‚

```javascript
// ä½¿ç”¨ qs åŒ…ï¼Œå¤„ç†å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
// npm i -S qs
// var qs = require('qs')
import qs from 'qs'
qs.stringify({ 'bar': 123 }) ===> "bar=123"
axios.post('/foo', qs.stringify({ 'bar': 123 }))

// æˆ–è€…ï¼š
axios.post('/foo', 'bar=123&age=19')
```

```javascript
const url = 'http://vue.studyit.io/api/postcomment/17'
axios.post(url, 'content=ç‚¹ä¸ªèµä¸è¿‡ä»½')

axios.post('/user', qs.stringify({
    firstName: 'Fred',
    lastName: 'Flintstone'
  }))
  .then(function (response) {
    console.log(response)
  })
  .catch(function (error) {
    console.log(error)
  })
```

### å…¨å±€é…ç½®

```javascript
// è®¾ç½®è¯·æ±‚å…¬å…±è·¯å¾„ï¼š
axios.defaults.baseURL = 'http://vue.studyit.io'
```

### æ‹¦æˆªå™¨

- æ‹¦æˆªå™¨ä¼šæ‹¦æˆªå‘é€çš„æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œè¯·æ±‚å‘é€ä¹‹å‰æ‰§è¡Œ `request` ä¸­çš„å‡½æ•°ï¼Œè¯·æ±‚å‘é€å®Œæˆä¹‹åæ‰§è¡Œ `response` ä¸­çš„å‡½æ•°ã€‚

```javascript
// è¯·æ±‚æ‹¦æˆªå™¨
axios.interceptors.request.use(function (config) {
    // æ‰€æœ‰è¯·æ±‚ä¹‹å‰éƒ½è¦æ‰§è¡Œçš„æ“ä½œ

    return config;
  }, function (error) {
    // é”™è¯¯å¤„ç†

    return Promise.reject(error);
  });

// å“åº”æ‹¦æˆªå™¨
axios.interceptors.response.use(function (response) {
    // æ‰€æœ‰è¯·æ±‚å®Œæˆåéƒ½è¦æ‰§è¡Œçš„æ“ä½œ

    return response
  }, function (error) {
    // é”™è¯¯å¤„ç†
    return Promise.reject(error);
  })
```

## vue-cli

### å®‰è£…è„šæ‰‹æ¶

```bash
npm install -g vue-cli
```

### æµ‹è¯•

```bash
vue -V # æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ
```

ç»“æœ

```bash
2.8.2 # å®‰è£…çš„ vue çš„ç‰ˆæœ¬å·
```

### æ­å»ºç¬¬ä¸€ä¸ªé¡¹ç›®

```bash
vue init webpack helloworld
```

webpack æ˜¯å®˜æ–¹æ¨¡æ¿
helloworld æ˜¯é¡¹ç›®åç§°

ä¾æ¬¡æŒ‰æç¤ºè¾“å…¥

```bash
? Project name (helloworld) # é¡¹ç›®å æŒ‡çš„æ˜¯ package.json ä¸­çš„é¡¹ç›®å
? Project description (A Vue.js project) # é¡¹ç›®æè¿°
? Author (xxxx <xxxx@qq.com>) # ä½œè€…
> Runtime + Compiler: recommended for most users # è¿è¡Œæ—¶ + ç¼–è¯‘
  Runtime-only: about 6KB lighter min+gzip, but templates (or any Vue-specific HTML) are ONLY allow
ed in .vue files - render functions are required elsewhere # ä»…è¿è¡Œæ—¶
? Install vue-router? (Y/n) # æ˜¯å¦å®‰è£… vue-router
? Use ESLint to lint your code? (Y/n) # æ˜¯å¦ä½¿ç”¨ ESLint
? Pick an ESLint preset (Use arrow keys) # é€‰æ‹©ESLint è§„åˆ™
> Standard (https://github.com/feross/standard)
  Airbnb (https://github.com/airbnb/javascript)
  none (configure it yourself)
? Setup unit tests with Karma + Mocha? (Y/n) # æµ‹è¯•ç¯å¢ƒ
? Setup e2e tests with Nightwatch? (Y/n)

# ç­‰å¾…
# å®Œæˆåä¼šæ˜¾ç¤ºä»¥ä¸‹æç¤º
   vue-cli Â· Generated "helloworld".
# æŒ‰æç¤ºä¾æ¬¡æ‰§è¡Œ
   To get started:

     cd helloworld
     npm install
     npm run dev

   Documentation can be found at https://vuejs-templates.github.io/webpack
```

ä¸€æ¬¡è¾“å…¥å‘½ä»¤, æµè§ˆå™¨ä¼šè‡ªåŠ¨å¼¹å‡º, æ˜¾ç¤ºé¡µé¢.

### é¡¹ç›®æ–‡ä»¶å¤¹è¯´æ˜

![é¡¹ç›®æ–‡ä»¶å¤¹è¯´æ˜](images/vue/é¡¹ç›®æ–‡ä»¶å¤¹è¯´æ˜.png)

### ä½¿ç”¨ç»„ä»¶

1.åœ¨ `src/components` ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ `m-header`, åˆ›å»º `m-header.vue` æ–‡ä»¶.

```html
<template>
  <div class="m-header">
    <div class="icon"></div>
    <h1 class="text">Chicken Music</h1>
  </div>
</template>

<script type="text/ecmascript-6">
  export default {}
</script>

<style scoped lang="stylus" rel="stylesheet/stylus">
</style>
```

2.åœ¨ä¸»æ–‡ä»¶ App.vue ä¸­å¼•å…¥

```html
<script type="text/ecmascript-6">
  import MHeader from 'components/m-header/m-header' // è®©ç¨‹åºè‡ªåŠ¨æŸ¥è¯¢.vueæ–‡ä»¶
  export default {
    components: {
      MHeader
    }
  }
</script>
```

3.åœ¨ä¸»æ–‡ä»¶ App.vue ä½¿ç”¨å¤„åŠ ä¸Šç»„ä»¶å

```html
<template>
  <div id="app">
    <m-header></m-header>
  </div>
</template>
```

### è·¯ç”±

1.åœ¨ `\src\router\index.js` ä¸­æ³¨å†Œè·¯ç”±

```javascript
// å¯¼åŒ…
import Vue from 'vue'
import Router from 'vue-router'
// æ³¨å†Œè·¯ç”±
Vue.use(Router)
```

2.å¯¼å…¥å…¶ä»–ç»„ä»¶, é…ç½®è·¯ç”±

```javascript
import Vue from 'vue'
import Router from 'vue-router'
import Recommend from 'components/recommend/recommend'
import Singer from 'components/singer/singer'
import Rank from 'components/rank/rank'
import Search from 'components/search/search'

Vue.use(Router)

export default new Router({
  routes: [
    { path: '/recommend', component: Recommend },
    { path: '/singer', component: Singer },
    { path: './rank', component: Rank },
    { path: '/search', component: Search }
  ]
})
```

3.åœ¨ main.js ä¸­ä½¿ç”¨

```javascript
import router from './router' // è¿™ä¸ª router æ˜¯ä¸Šä¸€æ­¥å¯¼å‡ºçš„ Routerçš„å®ä¾‹

new Vue({
  el: '#app',
  router, // ä¼ å…¥ router
  render: h => h(App)
})
```

4.é…ç½® tab.vue

```html
<template>
  <div class="tab">
    <router-link tag="div" class="tab-item" to="/recommend">
      <span class="tab-link">æ¨è</span>
    </router-link>
    <router-link tag="div" class="tab-item" to="/singer">
      <span class="tab-link">æ­Œæ‰‹</span>
    </router-link>
    <router-link tag="div" class="tab-item" to="/rank">
      <span class="tab-link">æ’è¡Œ</span>
    </router-link>
    <router-link tag="div" class="tab-item" to="/search">
      <span class="tab-link">æœç´¢</span>
    </router-link>
  </div>
</template>
```

5.App.vue ä¸­ä½¿ç”¨

```html
<template>
  <div id="app">
    <m-header></m-header>
    <tab></tab>
    <router-view></router-view>
  </div>
</template>

<script>
  import MHeader from 'components/m-header/m-header'
  import Tab from 'components/tab/tab'

  export default {
    components: {
      MHeader,
      Tab
    }
  }
</script>
```